<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extraction extraction-result-8550 - Theorizer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div class="header">
        <a href="../index.html"><i class="fas fa-flask"></i> Theorizer</a>
    </div>

    <div class="content">
        <h1>Extracted Data Details for extraction-result-8550</h1>

        <div class="section">
            <h2>Extracted Data (Header)</h2>
            <div class="info-section">
                <p><strong>Extraction ID:</strong> extraction-result-8550</p>
                <p><strong>Extraction Schema Used (ID):</strong> <a href="../schemas/extraction-schema-153.html">extraction-schema-153</a></p>
                <div class="extraction-query"><strong>Extraction Query:</strong> Extract any mentions of language models (LLMs) being evaluated on puzzle games that require spatial knowledge (such as Sudoku, Rubik's Cube, Minesweeper, etc.), including details of the models, the puzzles, the evaluation setup, the mechanisms or strategies used by the models, performance metrics, evidence of spatial reasoning, comparisons to other models or humans, and any reported limitations or failure cases.</div>
                <p><strong>Paper ID:</strong> paper-ea104918ddcb97d0c433dcdfdbd21411855874f8</p>
                <p><strong>Paper Title:</strong> <a href="https://www.semanticscholar.org/paper/ea104918ddcb97d0c433dcdfdbd21411855874f8" target="_blank">Mind's Eye of LLMs: Visualization-of-Thought Elicits Spatial Reasoning in Large Language Models</a></p>
                <p><strong>Paper Venue:</strong> Neural Information Processing Systems</p>
                <p><strong>Paper TL;DR:</strong> While VoT works surprisingly well on LLMs, the ability to generate mental images to facilitate spatial reasoning resembles the mind's eye process, suggesting its potential viability in MLLMs.</p>
                <p><strong>Paper Abstract:</strong> Large language models (LLMs) have exhibited impressive performance in language comprehension and various reasoning tasks. However, their abilities in spatial reasoning, a crucial aspect of human cognition, remain relatively unexplored. Human possess a remarkable ability to create mental images of unseen objects and actions through a process known as the Mind's Eye, enabling the imagination of the unseen world. Inspired by this cognitive capacity, we propose Visualization-of-Thought (VoT) prompting. VoT aims to elicit spatial reasoning of LLMs by visualizing their reasoning traces, thereby guiding subsequent reasoning steps. We employed VoT for multi-hop spatial reasoning tasks, including natural language navigation, visual navigation, and visual tiling in 2D grid worlds. Experimental results demonstrated that VoT significantly enhances the spatial reasoning abilities of LLMs. Notably, VoT outperformed existing multimodal large language models (MLLMs) in these tasks. While VoT works surprisingly well on LLMs, the ability to generate mental images to facilitate spatial reasoning resembles the mind's eye process, suggesting its potential viability in MLLMs. Please find the dataset and codes at https://microsoft.github.io/visualization-of-thought</p>
                <p><strong>Cost:</strong> 0.016</p>
            </div>
        </div>

        <div class="section">
            <h2>Extracted Data (Details)</h2>
            <div class="extraction-instance-container" id="e8550.0">
                <h3 class="extraction-instance">Extracted Data Instance 0 (e8550.0)</h3>
                <div class="extraction-query"><strong>Extraction Query:</strong> Extract any mentions of language models (LLMs) being evaluated on puzzle games that require spatial knowledge (such as Sudoku, Rubik's Cube, Minesweeper, etc.), including details of the models, the puzzles, the evaluation setup, the mechanisms or strategies used by the models, performance metrics, evidence of spatial reasoning, comparisons to other models or humans, and any reported limitations or failure cases.</div>
                <table>
                    <thead>
                        <tr>
                            <th style="width: 30%;">Field</th>
                            <th style="width: 70%;">Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>name_short</strong></td>
                            <td>GPT-4 (VoT)</td>
                        </tr>
                        <tr>
                            <td><strong>name_full</strong></td>
                            <td>Generative Pre-trained Transformer 4 (GPT-4) with Visualization-of-Thought prompting</td>
                        </tr>
                        <tr>
                            <td><strong>brief_description</strong></td>
                            <td>GPT-4 evaluated with the paper's proposed Visualization-of-Thought (VoT) prompting that interleaves textual chain-of-thought with ASCII/emoji 2D-grid visualizations to elicit spatial reasoning.</td>
                        </tr>
                        <tr>
                            <td><strong>citation_title</strong></td>
                            <td>here</td>
                        </tr>
                        <tr>
                            <td><strong>mention_or_use</strong></td>
                            <td>use</td>
                        </tr>
                        <tr>
                            <td><strong>model_name</strong></td>
                            <td>GPT-4</td>
                        </tr>
                        <tr>
                            <td><strong>model_description</strong></td>
                            <td>State-of-the-art large language model accessed via Azure OpenAI API (1106-preview); used in zero-shot mode with custom prompts. Employed as unimodal LLM to generate interleaved textual reasoning steps and text-form visualizations (2D grids / ascii-art / emoji grids).</td>
                        </tr>
                        <tr>
                            <td><strong>model_size</strong></td>
                            <td><span class="empty-note">null</span></td>
                        </tr>
                        <tr>
                            <td><strong>puzzle_name</strong></td>
                            <td>Visual Navigation (Route Planning & Next-step Prediction)</td>
                        </tr>
                        <tr>
                            <td><strong>puzzle_type</strong></td>
                            <td>Grid-based navigation puzzle requiring multi-hop spatial planning on a 2D grid (avoid obstacles, plan path across alternating horizontal/vertical edges).</td>
                        </tr>
                        <tr>
                            <td><strong>task_setup</strong></td>
                            <td>Zero-shot prompts. VoT prompt: "Visualize the state after each reasoning step." Input: textual/emoji 2D grid maps (special characters); outputs: interleaved reasoning steps and visualized grids, plus final navigation instruction sequence (directions). Evaluated on route-planning (predict entire direction sequence) and next-step prediction (predict next move given partial sequence).</td>
                        </tr>
                        <tr>
                            <td><strong>mechanisms_or_strategies</strong></td>
                            <td>Visualization-of-Thought (VoT): at each reasoning step the model generates a visualization v_i (ASCII/emoji grid) representing the internal state, then conditions the next textual reasoning step z_{i+1} on prior z and v. Baselines include standard chain-of-thought (CoT) and an explicit "w/o Viz" prompt that forbids visualization.</td>
                        </tr>
                        <tr>
                            <td><strong>performance_metrics</strong></td>
                            <td>GPT-4 VoT: Route planning completing rate 40.77% and success rate 14.72%; Next-step prediction accuracy 55.28%. (Table 1). For comparison, GPT-4 CoT: completing rate 37.02%, success rate 9.48%, next-step 48.61%; GPT-4 w/o Viz: completing 37.17%, success 10.28%, next-step 48.49%; GPT-4V (vision) CoT: completing 33.36%, success 5.65%, next-step 46.59%.</td>
                        </tr>
                        <tr>
                            <td><strong>evidence_of_spatial_reasoning</strong></td>
                            <td>Quantitative gains when VoT invoked (higher completing rate/success and next-step accuracy). The paper extracts visualizations and measures tracking (complete/partial). Spatial-visualization compliance ~51.14% and visualization accuracy ~26.48% for visual navigation under GPT-4 VoT; when visualization was accurate, final-answer accuracy (spatial understanding) was 65.16%, indicating internal visualizations correlate with correct spatial decisions. Qualitative examples show interleaved state-tracking and symbol usage (arrows, path markers).</td>
                        </tr>
                        <tr>
                            <td><strong>comparisons</strong></td>
                            <td>Directly compared to GPT-4 CoT, GPT-4 w/o Viz, and GPT-4V CoT (multimodal). GPT-4 VoT outperformed GPT-4 CoT and GPT-4V CoT on the visual navigation metrics (statistically significant vs baselines, p<0.05 reported). Performance also compared across difficulty levels (k=2..7) showing VoT generally maintains higher accuracy as k increases.</td>
                        </tr>
                        <tr>
                            <td><strong>limitations_or_failure_cases</strong></td>
                            <td>VoT improves but is far from perfect—success rate still low (14.72%) and visualization accuracy modest (~26%). Visualizations can be incorrect; the model sometimes produces correct language but inaccurate visuals or vice versa. Tracking behavior is prompt-sensitive (e.g., removing 'reasoning' from prompt hurts tracking). Performance degrades as difficulty (k) increases; smaller models often resort to random guessing. GPT-4 VoT still suffers from state-visualization errors and imperfect spatial understanding in complex route-planning cases.</td>
                        </tr>
                        <tr>
                            <td><strong>source_info</strong></td>
                            <td>{'paper_title': "Mind's Eye of LLMs: Visualization-of-Thought Elicits Spatial Reasoning in Large Language Models", 'publication_date_yy_mm': '2024-04'}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="extraction-instance-container" id="e8550.1">
                <h3 class="extraction-instance">Extracted Data Instance 1 (e8550.1)</h3>
                <div class="extraction-query"><strong>Extraction Query:</strong> Extract any mentions of language models (LLMs) being evaluated on puzzle games that require spatial knowledge (such as Sudoku, Rubik's Cube, Minesweeper, etc.), including details of the models, the puzzles, the evaluation setup, the mechanisms or strategies used by the models, performance metrics, evidence of spatial reasoning, comparisons to other models or humans, and any reported limitations or failure cases.</div>
                <table>
                    <thead>
                        <tr>
                            <th style="width: 30%;">Field</th>
                            <th style="width: 70%;">Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>name_short</strong></td>
                            <td>GPT-4 (VoT) - Visual Tiling</td>
                        </tr>
                        <tr>
                            <td><strong>name_full</strong></td>
                            <td>Generative Pre-trained Transformer 4 (GPT-4) with Visualization-of-Thought prompting on polyomino tiling</td>
                        </tr>
                        <tr>
                            <td><strong>brief_description</strong></td>
                            <td>GPT-4 using VoT to solve polyomino (visual tiling) puzzles on a 2D rectangle: given masked polyomino pieces and variants (rotations/reflections), chooses correct variant to fill masked cells.</td>
                        </tr>
                        <tr>
                            <td><strong>citation_title</strong></td>
                            <td>here</td>
                        </tr>
                        <tr>
                            <td><strong>mention_or_use</strong></td>
                            <td>use</td>
                        </tr>
                        <tr>
                            <td><strong>model_name</strong></td>
                            <td>GPT-4</td>
                        </tr>
                        <tr>
                            <td><strong>model_description</strong></td>
                            <td>Same as above: GPT-4 accessed via Azure API, zero-shot VoT prompting to generate stepwise visualizations and decisions.</td>
                        </tr>
                        <tr>
                            <td><strong>model_size</strong></td>
                            <td><span class="empty-note">null</span></td>
                        </tr>
                        <tr>
                            <td><strong>puzzle_name</strong></td>
                            <td>Visual Tiling (Polyomino / Tetromino tiling)</td>
                        </tr>
                        <tr>
                            <td><strong>puzzle_type</strong></td>
                            <td>2D grid tiling puzzle (polyomino placement, shape orientation selection) requiring shape understanding, rotation/reflection, fit/no-overlap constraints.</td>
                        </tr>
                        <tr>
                            <td><strong>task_setup</strong></td>
                            <td>Zero-shot prompts. Input: a 5x4 rectangle with several polyomino pieces (I, T, L tetrominoes) rendered in emoji/text, with 2-3 pieces randomly masked. Model must select the correct variant for a queried masked piece. VoT: generate visualization after each reasoning step showing placements.</td>
                        </tr>
                        <tr>
                            <td><strong>mechanisms_or_strategies</strong></td>
                            <td>VoT creates interim text-form mental images (grids) representing placements; reasoning steps reference these visualizations to decide orientations/placements. Also compared to CoT ("Let's think step by step") and a "w/o Viz" prompt.</td>
                        </tr>
                        <tr>
                            <td><strong>performance_metrics</strong></td>
                            <td>GPT-4 VoT accuracy on visual tiling: 63.94% (Table 1). Baselines: GPT-4 CoT 54.15%, GPT-4 w/o Viz 46.98%, GPT-4V CoT 49.62%. Spatial-visualization compliance (VoT) ~52.01%, visualization accuracy ~24.25%, and when visualization accurate, spatial understanding accuracy 77.20% (Table 2).</td>
                        </tr>
                        <tr>
                            <td><strong>evidence_of_spatial_reasoning</strong></td>
                            <td>Measured compliance and visualization-accuracy metrics; when internal visualization was correct, model answered correctly 77.2% of the time—evidence that accurate visual mental images materially help spatial reasoning. Case studies show self-refinement: models sometimes detect spatial hallucination and refine placements using visual feedback.</td>
                        </tr>
                        <tr>
                            <td><strong>comparisons</strong></td>
                            <td>VoT outperformed GPT-4 CoT and GPT-4V CoT on this task (p<0.05 vs baselines). Also shown that VoT helps more for larger models and that visualization-enabled LLMs can outperform a multimodal model (GPT-4V) on these synthetic grid tiling tasks.</td>
                        </tr>
                        <tr>
                            <td><strong>limitations_or_failure_cases</strong></td>
                            <td>Visualization accuracy is low (~24%), meaning many generated mental images are incorrect; inconsistencies between language and visualization are common. VoT may underperform when tasks are better solved by pure symbolic/logical transformations without visualization. Visual tiling improvements are model-size dependent; smaller models show limited benefits.</td>
                        </tr>
                        <tr>
                            <td><strong>source_info</strong></td>
                            <td>{'paper_title': "Mind's Eye of LLMs: Visualization-of-Thought Elicits Spatial Reasoning in Large Language Models", 'publication_date_yy_mm': '2024-04'}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="extraction-instance-container" id="e8550.2">
                <h3 class="extraction-instance">Extracted Data Instance 2 (e8550.2)</h3>
                <div class="extraction-query"><strong>Extraction Query:</strong> Extract any mentions of language models (LLMs) being evaluated on puzzle games that require spatial knowledge (such as Sudoku, Rubik's Cube, Minesweeper, etc.), including details of the models, the puzzles, the evaluation setup, the mechanisms or strategies used by the models, performance metrics, evidence of spatial reasoning, comparisons to other models or humans, and any reported limitations or failure cases.</div>
                <table>
                    <thead>
                        <tr>
                            <th style="width: 30%;">Field</th>
                            <th style="width: 70%;">Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>name_short</strong></td>
                            <td>GPT-4 (VoT) - Natural-Language Navigation</td>
                        </tr>
                        <tr>
                            <td><strong>name_full</strong></td>
                            <td>Generative Pre-trained Transformer 4 (GPT-4) with Visualization-of-Thought prompting on natural-language navigation</td>
                        </tr>
                        <tr>
                            <td><strong>brief_description</strong></td>
                            <td>GPT-4 with VoT evaluated on a natural-language navigation task where a textual description of a random-walk on a square map is given and the model must identify the object at the target location.</td>
                        </tr>
                        <tr>
                            <td><strong>citation_title</strong></td>
                            <td>here</td>
                        </tr>
                        <tr>
                            <td><strong>mention_or_use</strong></td>
                            <td>use</td>
                        </tr>
                        <tr>
                            <td><strong>model_name</strong></td>
                            <td>GPT-4</td>
                        </tr>
                        <tr>
                            <td><strong>model_description</strong></td>
                            <td>GPT-4 via Azure API in zero-shot settings with VoT prompt to produce intermediate visualizations representing positions on a 3x3 landmark grid while performing stepwise reasoning.</td>
                        </tr>
                        <tr>
                            <td><strong>model_size</strong></td>
                            <td><span class="empty-note">null</span></td>
                        </tr>
                        <tr>
                            <td><strong>puzzle_name</strong></td>
                            <td>Natural-Language Navigation (graph-walk on square map)</td>
                        </tr>
                        <tr>
                            <td><strong>puzzle_type</strong></td>
                            <td>Sequential navigation on a graph/square grid described by natural language instructions (textual map + sequence of moves) requiring spatial tracking of position and association to objects at vertices.</td>
                        </tr>
                        <tr>
                            <td><strong>task_setup</strong></td>
                            <td>Input: textual description of a square map (3x3 with named landmarks in snake order) and a sequence of navigation instructions. Prompt variants: CoT, VoT. VoT asks model to visualize state after each reasoning step (ASCII/emoji depictions of grid and moving position). The model must return the object at the final location.</td>
                        </tr>
                        <tr>
                            <td><strong>mechanisms_or_strategies</strong></td>
                            <td>VoT interleaves visualized states and textual reasoning to maintain position tracking. In some ring-structured variants, the model can reduce the problem to arithmetic (normalize steps to signed numbers and do modular arithmetic) without visualization.</td>
                        </tr>
                        <tr>
                            <td><strong>performance_metrics</strong></td>
                            <td>GPT-4 VoT accuracy on natural-language navigation: 59.00% (Table 1). GPT-4 CoT: 54.00%. GPT-4 w/o Viz: 35.50%. Notably, in a ring variant where arithmetic suffices, GPT-4 CoT outperformed GPT-4 VoT (52.5% vs 49.5%)—an explicit counter-example where verbal/symbolic reasoning beats visualization.</td>
                        </tr>
                        <tr>
                            <td><strong>evidence_of_spatial_reasoning</strong></td>
                            <td>VoT increases visual state-tracking rates and final accuracy in the general natural-language navigation setting; the paper reports significant improvement (23.5% improvement vs GPT-4 w/o Viz on the main natural-language navigation task). However, ablation (ring tasks) shows tasks solvable by symbolic arithmetic may not benefit from visualization.</td>
                        </tr>
                        <tr>
                            <td><strong>comparisons</strong></td>
                            <td>Compared across GPT-4 CoT, GPT-4 w/o Viz and GPT-4 VoT; VoT yields highest average performance except for ring arithmetic cases. Statistical significance is reported (VoT vs baselines).</td>
                        </tr>
                        <tr>
                            <td><strong>limitations_or_failure_cases</strong></td>
                            <td>For problems reducible to symbolic math (e.g., ring navigation normalized to modular arithmetic), VoT can underperform compared to straightforward CoT/symbolic solutions. Visual-state tracking is prompt-sensitive and can be disabled accidentally by small prompt changes, causing performance drops.</td>
                        </tr>
                        <tr>
                            <td><strong>source_info</strong></td>
                            <td>{'paper_title': "Mind's Eye of LLMs: Visualization-of-Thought Elicits Spatial Reasoning in Large Language Models", 'publication_date_yy_mm': '2024-04'}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="extraction-instance-container" id="e8550.3">
                <h3 class="extraction-instance">Extracted Data Instance 3 (e8550.3)</h3>
                <div class="extraction-query"><strong>Extraction Query:</strong> Extract any mentions of language models (LLMs) being evaluated on puzzle games that require spatial knowledge (such as Sudoku, Rubik's Cube, Minesweeper, etc.), including details of the models, the puzzles, the evaluation setup, the mechanisms or strategies used by the models, performance metrics, evidence of spatial reasoning, comparisons to other models or humans, and any reported limitations or failure cases.</div>
                <table>
                    <thead>
                        <tr>
                            <th style="width: 30%;">Field</th>
                            <th style="width: 70%;">Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>name_short</strong></td>
                            <td>GPT-4V (CoT)</td>
                        </tr>
                        <tr>
                            <td><strong>name_full</strong></td>
                            <td>GPT-4 Vision (multimodal GPT-4) with chain-of-thought prompting</td>
                        </tr>
                        <tr>
                            <td><strong>brief_description</strong></td>
                            <td>The multimodal variant of GPT-4 (GPT-4V) evaluated with CoT on the paper's visual tasks by providing the rendered images (emoji/text grids) as counterpart visual inputs.</td>
                        </tr>
                        <tr>
                            <td><strong>citation_title</strong></td>
                            <td>here</td>
                        </tr>
                        <tr>
                            <td><strong>mention_or_use</strong></td>
                            <td>use</td>
                        </tr>
                        <tr>
                            <td><strong>model_name</strong></td>
                            <td>GPT-4V (GPT-4 Vision)</td>
                        </tr>
                        <tr>
                            <td><strong>model_description</strong></td>
                            <td>Multimodal version of GPT-4 that accepts images in addition to text (vision-preview Azure model). Evaluated with zero-shot CoT prompting on the same synthetic visual inputs (images generated from textual grids using emoji rendering).</td>
                        </tr>
                        <tr>
                            <td><strong>model_size</strong></td>
                            <td><span class="empty-note">null</span></td>
                        </tr>
                        <tr>
                            <td><strong>puzzle_name</strong></td>
                            <td>Visual Navigation & Visual Tiling</td>
                        </tr>
                        <tr>
                            <td><strong>puzzle_type</strong></td>
                            <td>Grid-based visual puzzles; same 2D grid navigation and polyomino tiling tasks but with image counterparts provided as input.</td>
                        </tr>
                        <tr>
                            <td><strong>task_setup</strong></td>
                            <td>Zero-shot CoT prompt "Let's think step by step." The visual map is provided as an image (emoji-colored grid) rather than only textual ASCII art; outputs are textual solution steps and answers.</td>
                        </tr>
                        <tr>
                            <td><strong>mechanisms_or_strategies</strong></td>
                            <td>Standard CoT reasoning over the visual input (no explicit VoT visualization generated because the model already has the image).</td>
                        </tr>
                        <tr>
                            <td><strong>performance_metrics</strong></td>
                            <td>GPT-4V CoT: Visual Navigation route planning completing rate 33.36%, success rate 5.65%, next-step accuracy 46.59%; Visual Tiling accuracy 49.62% (Table 1). These are lower than GPT-4 VoT on the synthetic grid tasks.</td>
                        </tr>
                        <tr>
                            <td><strong>evidence_of_spatial_reasoning</strong></td>
                            <td>Performance indicates GPT-4V can reason from images but underperforms a VoT-enabled GPT-4 on these synthetic 2D-grid tasks, suggesting that internal textual visualization and state-tracking can outperform a direct image-conditioned multimodal model in this controlled setting.</td>
                        </tr>
                        <tr>
                            <td><strong>comparisons</strong></td>
                            <td>Compared directly to GPT-4 VoT and GPT-4 CoT; GPT-4 VoT outperformed GPT-4V CoT across the tested visual tasks (statistical significance vs baselines reported).</td>
                        </tr>
                        <tr>
                            <td><strong>limitations_or_failure_cases</strong></td>
                            <td>GPT-4V CoT underperformed vs GPT-4 VoT on these synthetic tasks; the paper notes GPT-4V's lower scores (especially in route planning success) and does not claim superiority for multimodal grounding in these controlled 2D-grid puzzles.</td>
                        </tr>
                        <tr>
                            <td><strong>source_info</strong></td>
                            <td>{'paper_title': "Mind's Eye of LLMs: Visualization-of-Thought Elicits Spatial Reasoning in Large Language Models", 'publication_date_yy_mm': '2024-04'}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="extraction-instance-container" id="e8550.4">
                <h3 class="extraction-instance">Extracted Data Instance 4 (e8550.4)</h3>
                <div class="extraction-query"><strong>Extraction Query:</strong> Extract any mentions of language models (LLMs) being evaluated on puzzle games that require spatial knowledge (such as Sudoku, Rubik's Cube, Minesweeper, etc.), including details of the models, the puzzles, the evaluation setup, the mechanisms or strategies used by the models, performance metrics, evidence of spatial reasoning, comparisons to other models or humans, and any reported limitations or failure cases.</div>
                <table>
                    <thead>
                        <tr>
                            <th style="width: 30%;">Field</th>
                            <th style="width: 70%;">Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>name_short</strong></td>
                            <td>GPT-3.5 / LLAMA3 family</td>
                        </tr>
                        <tr>
                            <td><strong>name_full</strong></td>
                            <td>GPT-3.5 Turbo and LLAMA3-8B/70B evaluated with CoT and VoT</td>
                        </tr>
                        <tr>
                            <td><strong>brief_description</strong></td>
                            <td>Smaller or alternative LLMs (GPT-3.5 turbo and LLAMA3 Instruct variants) tested to assess whether VoT benefits scale across model families and sizes.</td>
                        </tr>
                        <tr>
                            <td><strong>citation_title</strong></td>
                            <td>here</td>
                        </tr>
                        <tr>
                            <td><strong>mention_or_use</strong></td>
                            <td>use</td>
                        </tr>
                        <tr>
                            <td><strong>model_name</strong></td>
                            <td>GPT-3.5 turbo; LLAMA3-8B-Instruct; LLAMA3-70B-Instruct</td>
                        </tr>
                        <tr>
                            <td><strong>model_description</strong></td>
                            <td>GPT-3.5 turbo accessed via Azure OpenAI API (1106-preview) and LLAMA3 Instruct models (8B and 70B) used with greedy decoding. Experiments used zero-shot CoT and VoT prompts to evaluate spatial tasks.</td>
                        </tr>
                        <tr>
                            <td><strong>model_size</strong></td>
                            <td>GPT-3.5: null; LLAMA3-8B: 8B; LLAMA3-70B: 70B</td>
                        </tr>
                        <tr>
                            <td><strong>puzzle_name</strong></td>
                            <td>Visual Navigation, Visual Tiling, Natural-Language Navigation</td>
                        </tr>
                        <tr>
                            <td><strong>puzzle_type</strong></td>
                            <td>Same grid-based navigation and tiling puzzles requiring spatial tracking and shape reasoning.</td>
                        </tr>
                        <tr>
                            <td><strong>task_setup</strong></td>
                            <td>Zero-shot prompts; both CoT ("Let's think step by step") and VoT ("Visualize the state after each reasoning step"). Input format identical to GPT-4 experiments (textual/emoji grids).</td>
                        </tr>
                        <tr>
                            <td><strong>mechanisms_or_strategies</strong></td>
                            <td>Same VoT interleaving concept applied; smaller models attempt to produce visualizations and stepwise reasoning but often resort to random guesses or produce exhausted outputs in difficult cases.</td>
                        </tr>
                        <tr>
                            <td><strong>performance_metrics</strong></td>
                            <td>Selected numbers (Table 3): GPT-3.5 CoT: route completing 16.10%, success 2.62%, next-step 17.42%, visual tiling 44.10%, natural-language 8.50%. GPT-3.5 VoT: completing 19.02%, success 1.61%, next-step 13.10%, tiling 47.99%, nat-lang 9.00%. LLAMA3-8B CoT: route 4.65%, success 0%, next-step 28.73%, tiling 47.24%, nat-lang 16.50%. LLAMA3-8B VoT: route 4.97%, success 0.2%, next-step 26.75%, tiling 46.73%, nat-lang 15.50%. LLAMA3-70B CoT: route 19.90%, success 2.62%, next-step 49.01%, tiling 56.41%, nat-lang 26.00%. LLAMA3-70B VoT: route 30.24%, success 5.85%, next-step 54.09%, tiling 56.03%, nat-lang 32.50%. LLAMA3-70B VoT shows statistically significant improvements over its CoT baseline in several tasks (p<0.05).</td>
                        </tr>
                        <tr>
                            <td><strong>evidence_of_spatial_reasoning</strong></td>
                            <td>VoT benefits increase with model size: LLAMA3-70B shows marked improvements under VoT, while smaller models (GPT-3.5, LLAMA3-8B) show limited or inconsistent gains and often resort to random guessing. Performance trends across difficulty levels show larger models have predictable degradation with difficulty, while smaller models show irregularities attributed to guessing.</td>
                        </tr>
                        <tr>
                            <td><strong>comparisons</strong></td>
                            <td>Within-family scaling comparisons show LLAMA3-70B VoT >> LLAMA3-8B. GPT-3.5 gains from VoT are modest and sometimes inconsistent; VoT reduces random guessing in GPT-3.5 but cannot fully overcome limitations. The paper contrasts these models against GPT-4 VoT which remains the strongest performer.</td>
                        </tr>
                        <tr>
                            <td><strong>limitations_or_failure_cases</strong></td>
                            <td>Smaller models frequently guess randomly on hard instances, sometimes exhausting output tokens. VoT can reduce some random guessing but is sensitive to model capacity. Gains are inconsistent at low model sizes; VoT's effectiveness appears to require sufficiently capable models and emerges with scale.</td>
                        </tr>
                        <tr>
                            <td><strong>source_info</strong></td>
                            <td>{'paper_title': "Mind's Eye of LLMs: Visualization-of-Thought Elicits Spatial Reasoning in Large Language Models", 'publication_date_yy_mm': '2024-04'}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="section">
            <h2>Potentially Relevant New Papers (mentioned by this paper)</h2>
            <ol>
                <li>Evaluating spatial understanding of large language models <em>(Rating: 2)</em></li>
                <li>Evaluating cognitive maps and planning in large language models with cogeval <em>(Rating: 2)</em></li>
                <li>Mind's eye: Grounded language model reasoning through simulation <em>(Rating: 1)</em></li>
                <li>Language models represent space and time <em>(Rating: 1)</em></li>
                <li>3d-llm: Injecting the 3d world into large language models <em>(Rating: 1)</em></li>
            </ol>
        </div>

        <div class="section">
            <h2>Extracted Data (Debug)</h2>
            <pre><code>{
    "id": "extraction-result-8550",
    "paper_id": "paper-ea104918ddcb97d0c433dcdfdbd21411855874f8",
    "extraction_schema_id": "extraction-schema-153",
    "extracted_data": [
        {
            "name_short": "GPT-4 (VoT)",
            "name_full": "Generative Pre-trained Transformer 4 (GPT-4) with Visualization-of-Thought prompting",
            "brief_description": "GPT-4 evaluated with the paper's proposed Visualization-of-Thought (VoT) prompting that interleaves textual chain-of-thought with ASCII/emoji 2D-grid visualizations to elicit spatial reasoning.",
            "citation_title": "here",
            "mention_or_use": "use",
            "model_name": "GPT-4",
            "model_description": "State-of-the-art large language model accessed via Azure OpenAI API (1106-preview); used in zero-shot mode with custom prompts. Employed as unimodal LLM to generate interleaved textual reasoning steps and text-form visualizations (2D grids / ascii-art / emoji grids).",
            "model_size": null,
            "puzzle_name": "Visual Navigation (Route Planning & Next-step Prediction)",
            "puzzle_type": "Grid-based navigation puzzle requiring multi-hop spatial planning on a 2D grid (avoid obstacles, plan path across alternating horizontal/vertical edges).",
            "task_setup": "Zero-shot prompts. VoT prompt: \"Visualize the state after each reasoning step.\" Input: textual/emoji 2D grid maps (special characters); outputs: interleaved reasoning steps and visualized grids, plus final navigation instruction sequence (directions). Evaluated on route-planning (predict entire direction sequence) and next-step prediction (predict next move given partial sequence).",
            "mechanisms_or_strategies": "Visualization-of-Thought (VoT): at each reasoning step the model generates a visualization v_i (ASCII/emoji grid) representing the internal state, then conditions the next textual reasoning step z_{i+1} on prior z and v. Baselines include standard chain-of-thought (CoT) and an explicit \"w/o Viz\" prompt that forbids visualization.",
            "performance_metrics": "GPT-4 VoT: Route planning completing rate 40.77% and success rate 14.72%; Next-step prediction accuracy 55.28%. (Table 1). For comparison, GPT-4 CoT: completing rate 37.02%, success rate 9.48%, next-step 48.61%; GPT-4 w/o Viz: completing 37.17%, success 10.28%, next-step 48.49%; GPT-4V (vision) CoT: completing 33.36%, success 5.65%, next-step 46.59%.",
            "evidence_of_spatial_reasoning": "Quantitative gains when VoT invoked (higher completing rate/success and next-step accuracy). The paper extracts visualizations and measures tracking (complete/partial). Spatial-visualization compliance ~51.14% and visualization accuracy ~26.48% for visual navigation under GPT-4 VoT; when visualization was accurate, final-answer accuracy (spatial understanding) was 65.16%, indicating internal visualizations correlate with correct spatial decisions. Qualitative examples show interleaved state-tracking and symbol usage (arrows, path markers).",
            "comparisons": "Directly compared to GPT-4 CoT, GPT-4 w/o Viz, and GPT-4V CoT (multimodal). GPT-4 VoT outperformed GPT-4 CoT and GPT-4V CoT on the visual navigation metrics (statistically significant vs baselines, p&lt;0.05 reported). Performance also compared across difficulty levels (k=2..7) showing VoT generally maintains higher accuracy as k increases.",
            "limitations_or_failure_cases": "VoT improves but is far from perfect—success rate still low (14.72%) and visualization accuracy modest (~26%). Visualizations can be incorrect; the model sometimes produces correct language but inaccurate visuals or vice versa. Tracking behavior is prompt-sensitive (e.g., removing 'reasoning' from prompt hurts tracking). Performance degrades as difficulty (k) increases; smaller models often resort to random guessing. GPT-4 VoT still suffers from state-visualization errors and imperfect spatial understanding in complex route-planning cases.",
            "uuid": "e8550.0",
            "source_info": {
                "paper_title": "Mind's Eye of LLMs: Visualization-of-Thought Elicits Spatial Reasoning in Large Language Models",
                "publication_date_yy_mm": "2024-04"
            }
        },
        {
            "name_short": "GPT-4 (VoT) - Visual Tiling",
            "name_full": "Generative Pre-trained Transformer 4 (GPT-4) with Visualization-of-Thought prompting on polyomino tiling",
            "brief_description": "GPT-4 using VoT to solve polyomino (visual tiling) puzzles on a 2D rectangle: given masked polyomino pieces and variants (rotations/reflections), chooses correct variant to fill masked cells.",
            "citation_title": "here",
            "mention_or_use": "use",
            "model_name": "GPT-4",
            "model_description": "Same as above: GPT-4 accessed via Azure API, zero-shot VoT prompting to generate stepwise visualizations and decisions.",
            "model_size": null,
            "puzzle_name": "Visual Tiling (Polyomino / Tetromino tiling)",
            "puzzle_type": "2D grid tiling puzzle (polyomino placement, shape orientation selection) requiring shape understanding, rotation/reflection, fit/no-overlap constraints.",
            "task_setup": "Zero-shot prompts. Input: a 5x4 rectangle with several polyomino pieces (I, T, L tetrominoes) rendered in emoji/text, with 2-3 pieces randomly masked. Model must select the correct variant for a queried masked piece. VoT: generate visualization after each reasoning step showing placements.",
            "mechanisms_or_strategies": "VoT creates interim text-form mental images (grids) representing placements; reasoning steps reference these visualizations to decide orientations/placements. Also compared to CoT (\"Let's think step by step\") and a \"w/o Viz\" prompt.",
            "performance_metrics": "GPT-4 VoT accuracy on visual tiling: 63.94% (Table 1). Baselines: GPT-4 CoT 54.15%, GPT-4 w/o Viz 46.98%, GPT-4V CoT 49.62%. Spatial-visualization compliance (VoT) ~52.01%, visualization accuracy ~24.25%, and when visualization accurate, spatial understanding accuracy 77.20% (Table 2).",
            "evidence_of_spatial_reasoning": "Measured compliance and visualization-accuracy metrics; when internal visualization was correct, model answered correctly 77.2% of the time—evidence that accurate visual mental images materially help spatial reasoning. Case studies show self-refinement: models sometimes detect spatial hallucination and refine placements using visual feedback.",
            "comparisons": "VoT outperformed GPT-4 CoT and GPT-4V CoT on this task (p&lt;0.05 vs baselines). Also shown that VoT helps more for larger models and that visualization-enabled LLMs can outperform a multimodal model (GPT-4V) on these synthetic grid tiling tasks.",
            "limitations_or_failure_cases": "Visualization accuracy is low (~24%), meaning many generated mental images are incorrect; inconsistencies between language and visualization are common. VoT may underperform when tasks are better solved by pure symbolic/logical transformations without visualization. Visual tiling improvements are model-size dependent; smaller models show limited benefits.",
            "uuid": "e8550.1",
            "source_info": {
                "paper_title": "Mind's Eye of LLMs: Visualization-of-Thought Elicits Spatial Reasoning in Large Language Models",
                "publication_date_yy_mm": "2024-04"
            }
        },
        {
            "name_short": "GPT-4 (VoT) - Natural-Language Navigation",
            "name_full": "Generative Pre-trained Transformer 4 (GPT-4) with Visualization-of-Thought prompting on natural-language navigation",
            "brief_description": "GPT-4 with VoT evaluated on a natural-language navigation task where a textual description of a random-walk on a square map is given and the model must identify the object at the target location.",
            "citation_title": "here",
            "mention_or_use": "use",
            "model_name": "GPT-4",
            "model_description": "GPT-4 via Azure API in zero-shot settings with VoT prompt to produce intermediate visualizations representing positions on a 3x3 landmark grid while performing stepwise reasoning.",
            "model_size": null,
            "puzzle_name": "Natural-Language Navigation (graph-walk on square map)",
            "puzzle_type": "Sequential navigation on a graph/square grid described by natural language instructions (textual map + sequence of moves) requiring spatial tracking of position and association to objects at vertices.",
            "task_setup": "Input: textual description of a square map (3x3 with named landmarks in snake order) and a sequence of navigation instructions. Prompt variants: CoT, VoT. VoT asks model to visualize state after each reasoning step (ASCII/emoji depictions of grid and moving position). The model must return the object at the final location.",
            "mechanisms_or_strategies": "VoT interleaves visualized states and textual reasoning to maintain position tracking. In some ring-structured variants, the model can reduce the problem to arithmetic (normalize steps to signed numbers and do modular arithmetic) without visualization.",
            "performance_metrics": "GPT-4 VoT accuracy on natural-language navigation: 59.00% (Table 1). GPT-4 CoT: 54.00%. GPT-4 w/o Viz: 35.50%. Notably, in a ring variant where arithmetic suffices, GPT-4 CoT outperformed GPT-4 VoT (52.5% vs 49.5%)—an explicit counter-example where verbal/symbolic reasoning beats visualization.",
            "evidence_of_spatial_reasoning": "VoT increases visual state-tracking rates and final accuracy in the general natural-language navigation setting; the paper reports significant improvement (23.5% improvement vs GPT-4 w/o Viz on the main natural-language navigation task). However, ablation (ring tasks) shows tasks solvable by symbolic arithmetic may not benefit from visualization.",
            "comparisons": "Compared across GPT-4 CoT, GPT-4 w/o Viz and GPT-4 VoT; VoT yields highest average performance except for ring arithmetic cases. Statistical significance is reported (VoT vs baselines).",
            "limitations_or_failure_cases": "For problems reducible to symbolic math (e.g., ring navigation normalized to modular arithmetic), VoT can underperform compared to straightforward CoT/symbolic solutions. Visual-state tracking is prompt-sensitive and can be disabled accidentally by small prompt changes, causing performance drops.",
            "uuid": "e8550.2",
            "source_info": {
                "paper_title": "Mind's Eye of LLMs: Visualization-of-Thought Elicits Spatial Reasoning in Large Language Models",
                "publication_date_yy_mm": "2024-04"
            }
        },
        {
            "name_short": "GPT-4V (CoT)",
            "name_full": "GPT-4 Vision (multimodal GPT-4) with chain-of-thought prompting",
            "brief_description": "The multimodal variant of GPT-4 (GPT-4V) evaluated with CoT on the paper's visual tasks by providing the rendered images (emoji/text grids) as counterpart visual inputs.",
            "citation_title": "here",
            "mention_or_use": "use",
            "model_name": "GPT-4V (GPT-4 Vision)",
            "model_description": "Multimodal version of GPT-4 that accepts images in addition to text (vision-preview Azure model). Evaluated with zero-shot CoT prompting on the same synthetic visual inputs (images generated from textual grids using emoji rendering).",
            "model_size": null,
            "puzzle_name": "Visual Navigation & Visual Tiling",
            "puzzle_type": "Grid-based visual puzzles; same 2D grid navigation and polyomino tiling tasks but with image counterparts provided as input.",
            "task_setup": "Zero-shot CoT prompt \"Let's think step by step.\" The visual map is provided as an image (emoji-colored grid) rather than only textual ASCII art; outputs are textual solution steps and answers.",
            "mechanisms_or_strategies": "Standard CoT reasoning over the visual input (no explicit VoT visualization generated because the model already has the image).",
            "performance_metrics": "GPT-4V CoT: Visual Navigation route planning completing rate 33.36%, success rate 5.65%, next-step accuracy 46.59%; Visual Tiling accuracy 49.62% (Table 1). These are lower than GPT-4 VoT on the synthetic grid tasks.",
            "evidence_of_spatial_reasoning": "Performance indicates GPT-4V can reason from images but underperforms a VoT-enabled GPT-4 on these synthetic 2D-grid tasks, suggesting that internal textual visualization and state-tracking can outperform a direct image-conditioned multimodal model in this controlled setting.",
            "comparisons": "Compared directly to GPT-4 VoT and GPT-4 CoT; GPT-4 VoT outperformed GPT-4V CoT across the tested visual tasks (statistical significance vs baselines reported).",
            "limitations_or_failure_cases": "GPT-4V CoT underperformed vs GPT-4 VoT on these synthetic tasks; the paper notes GPT-4V's lower scores (especially in route planning success) and does not claim superiority for multimodal grounding in these controlled 2D-grid puzzles.",
            "uuid": "e8550.3",
            "source_info": {
                "paper_title": "Mind's Eye of LLMs: Visualization-of-Thought Elicits Spatial Reasoning in Large Language Models",
                "publication_date_yy_mm": "2024-04"
            }
        },
        {
            "name_short": "GPT-3.5 / LLAMA3 family",
            "name_full": "GPT-3.5 Turbo and LLAMA3-8B/70B evaluated with CoT and VoT",
            "brief_description": "Smaller or alternative LLMs (GPT-3.5 turbo and LLAMA3 Instruct variants) tested to assess whether VoT benefits scale across model families and sizes.",
            "citation_title": "here",
            "mention_or_use": "use",
            "model_name": "GPT-3.5 turbo; LLAMA3-8B-Instruct; LLAMA3-70B-Instruct",
            "model_description": "GPT-3.5 turbo accessed via Azure OpenAI API (1106-preview) and LLAMA3 Instruct models (8B and 70B) used with greedy decoding. Experiments used zero-shot CoT and VoT prompts to evaluate spatial tasks.",
            "model_size": "GPT-3.5: null; LLAMA3-8B: 8B; LLAMA3-70B: 70B",
            "puzzle_name": "Visual Navigation, Visual Tiling, Natural-Language Navigation",
            "puzzle_type": "Same grid-based navigation and tiling puzzles requiring spatial tracking and shape reasoning.",
            "task_setup": "Zero-shot prompts; both CoT (\"Let's think step by step\") and VoT (\"Visualize the state after each reasoning step\"). Input format identical to GPT-4 experiments (textual/emoji grids).",
            "mechanisms_or_strategies": "Same VoT interleaving concept applied; smaller models attempt to produce visualizations and stepwise reasoning but often resort to random guesses or produce exhausted outputs in difficult cases.",
            "performance_metrics": "Selected numbers (Table 3): GPT-3.5 CoT: route completing 16.10%, success 2.62%, next-step 17.42%, visual tiling 44.10%, natural-language 8.50%. GPT-3.5 VoT: completing 19.02%, success 1.61%, next-step 13.10%, tiling 47.99%, nat-lang 9.00%. LLAMA3-8B CoT: route 4.65%, success 0%, next-step 28.73%, tiling 47.24%, nat-lang 16.50%. LLAMA3-8B VoT: route 4.97%, success 0.2%, next-step 26.75%, tiling 46.73%, nat-lang 15.50%. LLAMA3-70B CoT: route 19.90%, success 2.62%, next-step 49.01%, tiling 56.41%, nat-lang 26.00%. LLAMA3-70B VoT: route 30.24%, success 5.85%, next-step 54.09%, tiling 56.03%, nat-lang 32.50%. LLAMA3-70B VoT shows statistically significant improvements over its CoT baseline in several tasks (p&lt;0.05).",
            "evidence_of_spatial_reasoning": "VoT benefits increase with model size: LLAMA3-70B shows marked improvements under VoT, while smaller models (GPT-3.5, LLAMA3-8B) show limited or inconsistent gains and often resort to random guessing. Performance trends across difficulty levels show larger models have predictable degradation with difficulty, while smaller models show irregularities attributed to guessing.",
            "comparisons": "Within-family scaling comparisons show LLAMA3-70B VoT &gt;&gt; LLAMA3-8B. GPT-3.5 gains from VoT are modest and sometimes inconsistent; VoT reduces random guessing in GPT-3.5 but cannot fully overcome limitations. The paper contrasts these models against GPT-4 VoT which remains the strongest performer.",
            "limitations_or_failure_cases": "Smaller models frequently guess randomly on hard instances, sometimes exhausting output tokens. VoT can reduce some random guessing but is sensitive to model capacity. Gains are inconsistent at low model sizes; VoT's effectiveness appears to require sufficiently capable models and emerges with scale.",
            "uuid": "e8550.4",
            "source_info": {
                "paper_title": "Mind's Eye of LLMs: Visualization-of-Thought Elicits Spatial Reasoning in Large Language Models",
                "publication_date_yy_mm": "2024-04"
            }
        }
    ],
    "potentially_relevant_new_papers": [
        {
            "paper_title": "Evaluating spatial understanding of large language models",
            "rating": 2
        },
        {
            "paper_title": "Evaluating cognitive maps and planning in large language models with cogeval",
            "rating": 2
        },
        {
            "paper_title": "Mind's eye: Grounded language model reasoning through simulation",
            "rating": 1
        },
        {
            "paper_title": "Language models represent space and time",
            "rating": 1
        },
        {
            "paper_title": "3d-llm: Injecting the 3d world into large language models",
            "rating": 1
        }
    ],
    "cost": 0.01627825,
    "model_str": "gpt-5-mini"
}</code></pre>
        </div>
        <div class="section">
            <h2>Paper</h2>
            <div class="paper-content"><h1>Mind's Eye of LLMs: Visualization-of-Thought Elicits Spatial Reasoning in Large Language Models</h1>
<p>Wenshan $\mathbf{W u}^{\dagger}$ Shaoguang Mao ${ }^{\dagger}$ Yadong Zhang ${ }^{\dagger, \ddagger, *}$ Yan Xia ${ }^{\dagger}$ Li Dong ${ }^{\dagger}$ Lei Cui ${ }^{\dagger}$ Furu Wei ${ }^{\dagger}$<br>${ }^{\dagger}$ Microsoft Research ${ }^{\ddagger}$ East China Normal University<br>Abstract</p>
<p>Large language models (LLMs) have exhibited impressive performance in language comprehension and various reasoning tasks. However, their abilities in spatial reasoning, a crucial aspect of human cognition, remain relatively unexplored. Human possess a remarkable ability to create mental images of unseen objects and actions through a process known as the Mind's Eye, enabling the imagination of the unseen world. Inspired by this cognitive capacity, we propose Visualization-of-Thought (VoT) prompting. VoT aims to elicit spatial reasoning of LLMs by visualizing their reasoning traces, thereby guiding subsequent reasoning steps. We employed VoT for multi-hop spatial reasoning tasks, including natural language navigation, visual navigation, and visual tiling in 2D grid worlds. Experimental results demonstrated that VoT significantly enhances the spatial reasoning abilities of LLMs. Notably, VoT outperformed existing multimodal large language models (MLLMs) in these tasks. While VoT works surprisingly well on LLMs, the ability to generate mental images to facilitate spatial reasoning resembles the mind's eye process, suggesting its potential viability in MLLMs. Please find the dataset and codes in our project page.
<img alt="img-0.jpeg" src="img-0.jpeg" /></p>
<p>Figure 1: Humans can enhance their spatial awareness and inform decisions by creating mental images during the spatial reasoning process. Similarly, large language models (LLMs) can create internal mental images. We propose the VoT prompting to elicit the "mind's eye" of LLMs for spatial reasoning by visualizing their thoughts at each intermediate step.</p>
<p><sup id="fnref:0"><a class="footnote-ref" href="#fn:0">1</a></sup></p>
<h1>1 Introduction</h1>
<p>Recently, large language models (LLMs) [ $\left.\mathrm{BCE}^{+} 23, \mathrm{BMR}^{+} 20, \mathrm{TLI}^{+} 23, \mathrm{JSM}^{+} 23\right]$ have achieved remarkable performance on various language-related tasks. However, despite their success in math reasoning [ $\left.\mathrm{KGR}^{+} 23\right]$, common sense reasoning [ $\left.\mathrm{LKH}^{+} 22\right]$, and other reasoning tasks such as symbolic reasoning or logic reasoning [ $\left.\mathrm{KGR}^{+} 23\right]$, their abilities in spatial reasoning still remain underexplored $\left[\mathrm{RFD}^{+} 21, \mathrm{YBL}^{+} 23, \mathrm{MHV}^{+} 24\right]$.</p>
<p>Spatial reasoning is an essential function of human cognition, allowing us to interact with the environment. It facilitates tasks that require understanding and reasoning about the spatial relationships between objects and their motions. The spatial reasoning of language models largely relies on language to reason about spatial information, whereas human cognitive capabilities extend far beyond verbal reasoning. Humans can not only create task-relevant abstract representations from visual perception [BK18, KC22], but also imagine unseen scenes through their mind's eye. It remains a research topic called mental image [She78] in domains of neuroscience, philosophy of mind, and cognitive science. Building upon this cognitive function, humans facilitate spatial reasoning by mental image manipulation, such as navigation [Tol48], mental rotation [SM71], mental paper folding [SF72], and mental simulation [MK09]. Figure 1 illustrates the human process involved in a navigation task. Humans enhance their spatial awareness and inform their decisions by creating mental images of a route, utilizing various sensory inputs such as navigation instructions or a map image. Subsequently, they simulate route planning through the mind's eye.</p>
<p>Inspired by this cognitive mechanism, we conjecture that LLMs possess the ability to create and manipulate mental images in the mind's eye for spatial reasoning. As illustrated in Figure 1, LLMs could potentially process and understand spatial information in various formats. They might be capable of visualizing internal states and manipulating these mental images through their mind's eye, thereby guiding subsequent reasoning steps to enhance spatial reasoning. Therefore, we propose the Visualization-of-Thought (VoT) prompting to elicit this ability. This method leverage LLMs to visualize their reasoning steps and inform subsequent steps, implementing the concept of visuospatial sketchpad [Bad92]. VoT adopts zero-shot prompting instead of relying on few-shot demonstrations or text-to-image visualization with CLIP [RKH ${ }^{+} 21$ ]. This choice stems from LLMs' ability to acquire various mental images from text-based visual art [SB14, SMM21, Reg19].</p>
<p>To evaluate the effectiveness of VoT in spatial reasoning, we selected three tasks that require spatial awareness in LLMs, including natural-language navigation [ $\left.\mathrm{YBL}^{+} 23\right]$, visual navigation, and visual tiling. These tasks require an understanding of space, direction, and geometric shape reasoning. To emulate human-like multisensory perception, we designed 2D grid worlds using special characters as enriched input formats for the LLMs in visual navigation and visual tiling tasks. We compared different models (GPT-4, GPT-4V) and prompting techniques across these three tasks. The findings reveal that the VoT prompting proposed in this paper consistently induces LLMs to visualize their reasoning steps and inform subsequent steps. Consequently, this approach achieved significant performance improvements on the corresponding tasks.</p>
<p>The main contributions of this paper include:</p>
<ol>
<li>We shed light on LLMs' mental image for spatial reasoning from a cognitive perspective, conducting quantitative and qualitative analyses on the mind's eye of LLMs and its limitations. We also explore cues about the origin of this generalized ability from code pre-training.</li>
<li>We develop two tasks of "visual navigation" and "visual tiling", along with corresponding synthetic datasets, emulating various sensory inputs for LLMs. These tasks are structured to support varying levels of difficulty, offering a well-designed testbed for the research on spatial reasoning.</li>
<li>We propose Visualization-of-Thought (VoT) prompting to elicit the mind's eye of LLMs for spatial reasoning and provide empirical evaluations on three tasks. Experiment results prove the effectiveness of VoT prompting compared with other prompting methods and existing MLLMs. This ability to generate mental images to facilitate spatial reasoning resembles the mind's eye process, suggesting its potential viability in MLLMs.</li>
</ol>
<p>2 Spatial Reasoning</p>
<p>Spatial reasoning refers to the ability to comprehend and reason about the spatial relationships among objects, their movements, and interactions with the environment. This skill is vital for a wide range of real-world applications such as navigation, robotics, and autonomous driving. These fields necessitate action planning based on visual perception and a concrete understanding of spatial dimensions.</p>
<p>Although several tasks and datasets [WBC+15, SZL22, MK22, LB18, RAB+20] have been developed to probe the spatial semantics embedded in text, existing research efforts often focus on how spatial terms are linguistically structured. Recently, significant achievements and impressive results have been achieved in these benchmarks by converting spatial terms to logical forms through LLMs and adopting logic programming [YIL23]. This implies that excelling in these tasks does not necessarily equate to a genuine understanding of spatial information by LLMs, nor does it provide an accurate measure of their spatial awareness.</p>
<p>Spatial awareness involves understanding spatial relationships, directions, distances, and geometric shapes, all of which are essential for action planning in the physical world. To evaluate the spatial awareness and spatial reasoning abilities of LLMs, we have selected tasks that test navigation and geometric reasoning skills, including natural language navigation, visual navigation and visual tiling.</p>
<h3>2.1 Natural Language Navigation</h3>
<p>Natural language navigation task [YBL+23] was inspired by prior research on human cognition [GDB17] presenting participants with sequential transitions sampled from a graph structure.</p>
<p>In this context, a square map is defined by a sequence of random walk instructions and associated objects at each location, denoted as $W=\left{\left(l_{1},o_{1}\right),\left(l_{2},o_{2}\right),\ldots,\left(l_{n},o_{n}\right)\right}$. Given a square map $W$, and sequence of navigation instructions $I=\left{i_{1},\ldots,i_{k}\right}$, the task for the model is to identify the associated object $o \in W$ at the specified location $l$ which is determined by the navigation instructions, as detailed in Equation 1 and exemplified in Appendix B.2.</p>
<p>$$
o \sim p\left(o \in W \mid W=\left{\left(l_{1}, o_{1}\right),\left(l_{2}, o_{2}\right), \ldots,\left(l_{n}, o_{n}\right)\right}, I\right)
$$</p>
<h1>2.2 Visual Navigation</h1>
<p>Visual navigation task presents a synthetic 2D grid world to LLM, challenging it to navigate using visual cues. The model must generate navigation instructions to move in four directions (left, right, up, down) to reach the destination from the starting point while avoiding obstacles. This involves two sub-tasks: route planning and next step prediction, requiring multi-hop spatial reasoning, while the former is more complex. Task instructions are available in Figure 6 in appendix.</p>
<p>Formulation The model is presented with a grid map $M$ consisting of $k$ consecutive edges $E=\left{e\left(s_{0}, s_{1}\right), e\left(s_{1}, s_{2}\right), \cdots, e\left(s_{k-1}, s_{k}\right)\right}$, where the starting point and destination are $s_{0}$ and $s_{k}$ respectively, as shown in Figure 2. Route planning task is to generate a sequence of correct directions $D=\left{d\left(s_{0}, s_{1}\right), d\left(s_{1}, s_{2}\right), \cdots, d\left(s_{k-1}, s_{k}\right)\right}$, as defined in Equation 2. Given $M$ and $t$ navigation instructions $D_{t, 0&lt;t&lt;k}=\left{d\left(s_{0}, s_{1}\right), \cdots, d\left(s_{t-1}, s_{t}\right)\right}$, next step prediction task is to identify the correct direction $d\left(s_{t}, s_{t+1}\right)$ of the next step, as defined in Equation 3.</p>
<p>$$
D \sim p\left(\left{d\left(s_{0}, s_{1}\right), d\left(s_{1}, s_{2}\right), \cdots, d\left(s_{k-1}, s_{k}\right)\right} \mid M\right)
$$</p>
<p><img alt="img-1.jpeg" src="img-1.jpeg" /></p>
<p>Figure 2: Examples of a navigation map under different settings of $k$, with emoji of house indicating the starting point, and emoji of office indicating the destination.</p>
<p>$d$ $\sim p(d(s_{t},s_{t+1}) \mid M, D_{t, 0&lt;t&lt;k})$</p>
<p>Implementation The navigation map's underlying graph is semi-Eulerian, alternating between horizontal and vertical edges, with $2^{k+1}$ possible spatial configurations for a $k$-hop navigation map. For each map and set of $k$ navigation instructions, $k-1$ question-and-answer (QA) instances,i.e. "what is the next step?" are created. Further implementation details are in Appendix A.1.</p>
<h1>2.3 Visual Tiling</h1>
<p>Introduced by [Gol66], polyomino tiling is a classic spatial reasoning challenge. We extend this concept to test the LLM's ability to comprehend, organize, and reason with shapes in a confined area, thus enhancing the evaluation of spatial reasoning skills. As depicted in Figure 3, the task involves a rectangle with unfilled cells and various polyomino pieces, like the I-tetromino made of four aligned squares. The model must select the appropriate polyomino variant, such as choosing the orientation for the I-tetromino, to solve the QA puzzle. Task instructions are provided in Figure 7 in appendix.</p>
<p>Formulation The model is presented with a rectangle $R$ masked with $k$ unique polyominoes $M P=\left{m p_{1}, \cdots, m p_{k}\right}, 2$ corresponding variants of each polyomino $v_{i&lt;=k}=\left{v_{i 1}, v_{i 2}\right}$, and a polyomino query $q \in M P$. Visual tiling task is to identify the correct variant of $q$, as defined in Equation 4.</p>
<p>$$
v \sim p\left(v_{q} \mid R,\left{m p_{1}, \cdots, m p_{k}\right},\left{v_{11}, v_{12} \cdots, v_{k 1}, v_{k 2}\right}, q\right)
$$</p>
<p>Implementation The dataset comprises valid spatial arrangements generated through existing algorithms[ES03, GN07], with random masking of polyominoes to create QA puzzles. Details are provided in Appendix A.2.
<img alt="img-2.jpeg" src="img-2.jpeg" /></p>
<p>Figure 3: Example of visual tiling with masked polyomino pieces. Variants of those polyomino pieces including rotation and reflection are not shown in this figure.</p>
<h2>3 Visualization-of-Thought Prompting</h2>
<p>Considering the way humans process spatial information during tasks like navigation, it's common to create mental images, such as maps, to enhance spatial awareness or simulating movements to inform decision-making. Our objective is to elicit the spatial awareness of LLMs and ground their reasoning by visualizing the consequence of their intermediate reasoning steps.
We introduce Visualization-of-Thought (VoT) prompting: "Visualize the state after each reasoning step." This new paradigm for spatial reasoning aims to generate reasoning traces and visualizations in an interleaved manner. Qualitative results of this approach are presented in Figure 4.
We use $p_{\theta}$ to denote a pre-trained LM with parameters $\theta, x, y, z$ to denote a language sequence, and $v$ to denote a visualization sequence in text form. In a multi-hop spatial reasoning task with input $x$, CoT prompting generates a series of intermediate steps $z_{1}, \cdots, z_{n}$, each step $z_{i} \sim p_{\theta}\left(z_{i} \mid x, z_{1 \cdots i-1}\right)$ is sampled sequentially, followed by the output $y \sim p_{\theta}\left(y \mid x, z_{1 \cdots n}\right)$. As shown in Figure 1, VoT prompting enhances this process by adding a visuospatial sketchpad to each intermediate step $z_{i}$, then the subsequent step $z_{i+1}$ is sampled conditioned on prior steps $z_{1 \cdots i}$ and visualizations $v_{1 \cdots i}$.
As defined in the Equation 5 and 6, it forms interleaved reasoning traces and visualizations. A qualitative comparison between outputs of VoT and CoT is provided in Figure 8a in appendix.</p>
<p>$$
v_{i} \sim p_{\theta}\left(v_{i} \mid \operatorname{prompt}<em 1="1" _cdots="\cdots" i="i">{V o T}, x, z</em>\right)
$$}, v_{1 \cdots i-1</p>
<p><img alt="img-3.jpeg" src="img-3.jpeg" /></p>
<p>Figure 4: Examples of VoT prompting in three tasks, where LLM generates 2D grids as text-form mental images. The generated reasoning traces and visualizations form an interleaved sequence to track the state over time. The 2D grids in the input and responses are composed of special characters. Full responses could be found in Appendix B.</p>
<p>$$
z_{i+1} \sim p_{\theta}\left(z_{i+1} \mid \operatorname{prompt}<em 1="1" _cdots="\cdots" i="i">{V o T}, x, z</em>\right)
$$}, v_{1 \cdots i</p>
<p>This reasoning paradigm enables LLMs with visual state tracking. We introduce the concept of a state, denoted as $s_{i}=\left[x, z_{1 \cdots i}, v_{1 \cdots i-1}\right]$ representing a partial solution at step $i$ with the input, the sequence of intermediate steps $z_{1 \cdots i}$ and the sequence of visualizations $v_{1 \cdots i-1}$.</p>
<p>$$
\begin{aligned}
v_{i} &amp; \sim p_{\theta}\left(v_{i} \mid \operatorname{prompt}<em 1="1" _cdots="\cdots" i="i">{V o T}, x, z</em>\right) \
&amp; \sim p_{\theta}\left(v_{i} \mid \operatorname{prompt}}, v_{1 \cdots i-1<em i="i">{V o T}, s</em>\right)
\end{aligned}
$$</p>
<p>As shown in Equation 7, visual state tracking is implemented by generating the visualization $v_{i}$ as representation of the internal state $s_{i}$ after each reasoning step $z_{i}$ (e.g. $v_{i}$ could be a grid of the navigation map marked with path or a filled rectangle). Grounded by the visual state tracking sequence, the subsequent state is derived by $s_{i+1} \sim p_{\theta}\left(s_{i+1} \mid\right.$ prompt $<em i="i">{V o T}, x, s</em>$ ). This mechanism allows for the derivation of subsequent states, reflecting spatiotemporal causality and enhancing the spatial reasoning capabilities of LLMs in a grounded context.}, v_{i</p>
<h1>4 Experiment</h1>
<h3>4.1 Setup</h3>
<p>For the visual tasks where a counterpart image exists for each text input, we conduct additional experiments with a multimodal model. Specifically, we adopt GPT-4 [OA ${ }^{\wedge} 23$ ] and GPT-4 Vision [Ope23] via Azure OpenAI API as they're state of the art LLM and multimodal model respectively. API settings are temperature 0 as greedy decoding and top $p 1$, with model versions of 1106-preview and vision-preview. For all experiments we adopt zero-shot prompting.
Depending on whether the LLM is explicitly prompted to visualize intermediate steps, we experiment with three settings of GPT-4, including zero-shot CoT prompting(GPT-4 CoT), GPT-4 w/o Viz where visualization is explicitly disabled during reasoning, and VoT prompting (GPT-4 VoT). Additional setting of GPT-4 Vision with counterpart image input is GPT-4V CoT. Prompts are as following:</p>
<ul>
<li>GPT-4 CoT: Let's think step by step.</li>
<li>GPT-4 w/o Viz: Don't use visualization. Let's think step by step.</li>
<li>GPT-4V CoT: Let's think step by step.</li>
<li>GPT-4 VoT: Visualize the state after each reasoning step.</li>
</ul>
<p>Task instructions and examples could be found in Appendix B.</p>
<h1>4.2 Dataset</h1>
<p>Natural Language Navigation We generate 200 square maps of size 3x3 which is described by 9 landmarks in snake order traversal, and a set of navigation instructions.</p>
<p>Visual Navigation We generate 496 navigation maps and 2520 QA instances in total, covering various map sizes, up to $7 \times 9$ and $9 \times 7$. The data distribution is provided in Table 4 in appendix.</p>
<p>Visual Tiling We first generate multiple unique configurations to fill a $5 \times 4$ rectangle with 5 polyomino pieces including two I tetrominoes, two T tetrominoes and one L tetromino. Then we randomly masked two or three pieces of different types and generate QA instance for each masked pieces. The total number of QA instances is 796, and we show dataset details in Table 5 in appendix.</p>
<h3>4.3 Metric</h3>
<p>We extract the answer from model output by pattern matching. For tasks except for route planning, we calculate accuracy by Equation 8. We adopted sub-string matching ${ }^{1}$ as $f_{\text {correct }}$ to determine correctness.</p>
<p>$$
a c c=\sum_{i}^{n} f_{\text {correct }} \text { (extracted_answer, ground_truth) } / n
$$</p>
<p>For the route planning task which predicts a sequence of navigation instructions, we reject any sequences exceeding 100 instructions, considering them to be random guesses. We then normalize the navigation instructions by executing each navigation instruction. Those instructions which violate navigation rules will be ignored. The length $t$ of normalized instruction sequence is considered as the temporal distance against the starting point. Given the ground-truth of $k$ navigation instructions, the completing rate of route planning is $t / k$. For the dataset of $n$ maps, we report two metrics including:</p>
<ol>
<li>Average completing rate: $\sum_{i}^{n} t_{i} / k_{i} / n$. Average completing rate among all instruction sequences, reflecting LLM's effectiveness of route planning.</li>
<li>Success rate: $\sum_{i}^{n}\left(t_{i}==k_{i}\right) / n$. This metric represents the proportion of instruction sequences with $t=k$, i.e., reaching the destination.</li>
</ol>
<h3>4.4 Results</h3>
<p>As illustrated in Table 1, GPT-4 VoT significantly outperforms other settings in all tasks across all metrics. The significant gap when comparing GPT-4 VoT with GPT-4V CoT and GPT-4 w/o Viz demonstrates that effectiveness of visual state tracking, which allows LLMs visually interpret their actions within an grounded world. And in the natural language navigation task, GPT-4 VoT outperforms GPT-4 w/o Viz by 23.5\%. In the visual tasks, the noticeable performance gap between GPT-4 CoT and GPT-4V CoT indicates that LLM grounded with 2D grid could possibly outperform a MLLM in challenging spatial reasoning tasks.
On the other hand, performance of GPT-4 VoT is still far from perfect in all tasks, especially in the most challenging route planning task. Despite these tasks are relatively easy for humans, performance of LLMs drops significantly as task difficulty increases. Details on performance trends across difficulty levels are provided in figure 9 and table 6 in appendix.</p>
<p><sup id="fnref2:0"><a class="footnote-ref" href="#fn:0">1</a></sup></p>
<table>
<thead>
<tr>
<th>Settings</th>
<th>Visual Navigation</th>
<th></th>
<th></th>
<th>Visual Tiling</th>
<th>Natural-Language</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>Route Planning</td>
<td></td>
<td>Next Step</td>
<td></td>
<td>Navigation</td>
</tr>
<tr>
<td></td>
<td>Completing Rate</td>
<td>Succ Rate</td>
<td>Prediction</td>
<td></td>
<td></td>
</tr>
<tr>
<td>GPT-4 CoT</td>
<td>37.02</td>
<td>9.48</td>
<td>48.61</td>
<td>54.15</td>
<td>54.00</td>
</tr>
<tr>
<td>GPT-4 w/o Viz</td>
<td>37.17</td>
<td>10.28</td>
<td>48.49</td>
<td>46.98</td>
<td>35.50</td>
</tr>
<tr>
<td>GPT-4V CoT</td>
<td>33.36</td>
<td>5.65</td>
<td>46.59</td>
<td>49.62</td>
<td>$l$</td>
</tr>
<tr>
<td>GPT-4 VoT</td>
<td>$\underline{\mathbf{4 0 . 7 7}}$</td>
<td>$\underline{\mathbf{1 4 . 7 2}}$</td>
<td>$\underline{\mathbf{5 5 . 2 8}}$</td>
<td>$\underline{\mathbf{6 3 . 9 4}}$</td>
<td>$\underline{\mathbf{5 9 . 0 0}}$</td>
</tr>
</tbody>
</table>
<p>Table 1: Performance of different GPT-4/4V settings in all tasks. Underline denotes statistical significance with $\mathrm{p}&lt;0.05$ when comparing GPT-4 VoT against all baselines using two-sample z-test, while $\mathrm{p}&lt;0.16$ is observed compared with GPT-4 CoT in natural language navigation task.</p>
<h1>5 Analysis</h1>
<p>As explained in section 3, one of the core aspects of VoT lies in enabling LLMs with visual state tracking. During the experiments, it was observed that GPT-4 CoT occasionally exhibited this reasoning pattern across several tasks with exception of route planning. Besides, incorrect visualizations of VoT are commonly observed in model outputs. In this section, our analysis of VoT primarily focuses on three questions: (1) Do visual state tracking behaviors differ among prompting methods? (2) How visualizations enhance final answers? (3) Can VoT benefit less powerful language models?</p>
<h3>5.1 Do visual state tracking behaviors differ among prompting methods?</h3>
<p>For each model output, we extract the sequence of visualizations sampled prior to generating the final answer and discard any visualizations generated thereafter. Then we compare the sequence length $l_{v}$ with the number of reasoning steps $l_{s}$. We calculate Complete Tracking $\sum_{i}^{n}\left(l_{v}==l_{s}\right) / n$ when a visualization $v_{i}$ corresponds to each state $s_{i}$. Similarly, we calculate the Partial Tracking metric as $\sum_{i}^{n}\left(l_{v}&gt;0\right) / n$ when at least one visualization is present before the final answer is generated. Figure 5 shows the significant differences between these settings. In the GPT-4 CoT setting, it demonstrated noticeable tracking rate across almost all tasks except route planning. This observation implies that LLMs inherently exhibit the capability of visual state tracking when spatiotemporal simulation is integral to reasoning.</p>
<p>On the other hand, the visual state tracking behavior is sensitive to prompts to varying degrees. As showcased in Figure 8 in appendix, after removing "reasoning" from the prompt of VoT, the visualizations are sampled after GPT-4 generates the wrong answer. Consequently, explicitly prompting LLMs to visualize their reasoning traces with VoT markedly improves the visual tracking rate, thereby enhancing overall performance. The potential contribution of code pre-training to this emergent capability is further explored in Appendix C.
<img alt="img-4.jpeg" src="img-4.jpeg" /></p>
<p>Figure 5: tracking rate of different settings across all tasksk.</p>
<h3>5.2 How visualizations enhance final answers?</h3>
<p>Ideally, VoT is supposed to generate an accurate visualization $v_{i}$ at each step, so that subsequent step $z_{i+1}$ could be determined correctly. This relies on the spatial visualization and spatial understanding capability of LLMs. To evaluate these capabilities of LLMs in these tasks, we extract the final visualization from each model output under the setting GPT-4 VoT in visual navigation and polyomino</p>
<p>tiling task. Specifically, for visual navigation task, we extract the visualized map where LLM completed all navigation instructions. For polyomino tiling, we extract the rectangle filled with corresponding polyomino piece. The spatial visualization capability is measured by two criteria: (1) Compliance, indicating whether the manipulation of mental image satisfies requirements such as avoiding overlap and navigating around obstacles. (2) Accuracy, indicating whether the mental image aligns with the corresponding state. The spatial understanding capability is measured by the proportion of correct answers when the corresponding visualization is generated accurately.
As could be seen from Table 2, LLMs demonstrate promising potential in performing multi-hop visualization while adhering to spatial constraints, with compliance rates of approximately 51-52\%. However, the relatively low accuracy of state visualization (around $24 \%-26 \%$ ) indicates a need for significant improvements in this area. Despite this limitation, LLMs are able to make correct decisions in $\mathbf{6 5 \%}$ - $\mathbf{7 7 \%}$ of the cases when accurate internal state visualizations are generated, which enhances groundedness and contributes to notable performance gains. Several case studies are provided in Appendix E for interested readers.</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Task</th>
<th style="text-align: center;">Spatial Visualization</th>
<th style="text-align: center;"></th>
<th style="text-align: center;">Spatial Understanding</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">Compliance</td>
<td style="text-align: center;">Accuracy</td>
<td style="text-align: center;">Accuracy</td>
</tr>
<tr>
<td style="text-align: center;">Visual Navigation</td>
<td style="text-align: center;">51.14</td>
<td style="text-align: center;">26.48</td>
<td style="text-align: center;">65.16</td>
</tr>
<tr>
<td style="text-align: center;">Visual Tilling</td>
<td style="text-align: center;">52.01</td>
<td style="text-align: center;">24.25</td>
<td style="text-align: center;">77.20</td>
</tr>
</tbody>
</table>
<p>Table 2: Spatial visualization/understanding evaluation in visual navigation and visual tiling task.
On the other hand, VoT prompting might underperform in those tasks where LLMs can leverage logical reasoning without visualizing internal states. We conducted experiments in natural language navigation within a ring [YBL+23], where navigation instructions are either clockwise or counterclockwise movements. By normalizing each instruction to a signed number, GPT-4 converts this task to mathematical calculation of adding and modulus operation. For example, instructions of 15 steps clockwise and 3 steps counter-clockwise are normalized to (15 - 3) \% 12. Results show that GPT-4 CoT outperforms GPT-4 VoT with 52.5\% VS 49.5\% among 200 test instances with ring size of 12.</p>
<h1>5.3 Can VoT benefit less powerful language models?</h1>
<p>To evaluate the efficacy of VoT on less powerful language models, we conducted experiments across various model families [BMR ${ }^{+} 20, \mathrm{OA}^{+} 23, \mathrm{TLI}^{+} 23$ ] and model sizes, including GPT-3.5 turbo, LLAMA3-8B-Instruct and LLAMA3-70B-Instruct. We access GPT-3.5 via Azure OpenAI API with model version 1106-preview and apply greedy decoding to all models.
As shown in Table 3, within the same model family, performance improves across all tasks with increases in model size. LLAMA3-70B VoT significantly outperforms the baseline across all tasks except for visual tiling, where it aligns closely with results observed in GPT-4. This consistency suggests that VoT offers a scaling advantage when applied to more advanced models, markedly enhancing performance in larger models. In contrast, less capable models tend to rely on random guessing, especially in spatial reasoning tasks. For instance, in the route planning task, GPT-3.5 CoT often resorts to speculative responses, random guessing in nearly half of the instances, which leads to exhaustion of output tokens. While GPT-3.5 VoT effectively minimizes random guesses, such occurrences become increasingly rare with GPT-4 CoT as the model size expands. On the other hand, the reliance on random guessing introduces unpredictability in performance trends for less powerful models. It suggests their limitations in sustaining reliable reasoning processes across different difficulty levels. Details on performance trends are provided in Appendix D.</p>
<h2>6 Related Works</h2>
<p>Spatial Reasoning over Text Spatial reasoning and spatial language understanding [KPM20] in NLP domain mainly focus on semantic representation [CBGG97, Bat10, HK11], spatial information extraction [RMK18, KVOM11], learning and reasoning [KM15, SLYA17, KFP19]. Recent advancements have further explored spatial reasoning within the context of large language models (LLMs). To improve multi-hop spatial reasoning skills of language models, several works [MFNK21, MK22] proposed to pretrain language models with synthetic datasets. An increasing number of dataset were then developed to covers various type of spatial relations in 2D visual scenes [WBC ${ }^{+} 15$, SZL22],</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Settings</th>
<th style="text-align: center;">Visual Navigation</th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
<th style="text-align: center;">Visual Tiling</th>
<th style="text-align: center;">Natural-Language <br> Navigation</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">Route Planning</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">Next Step <br> Prediction</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">Completing Rate</td>
<td style="text-align: center;">Succ Rate</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">GPT-3.5 CoT</td>
<td style="text-align: center;">16.10</td>
<td style="text-align: center;">2.62</td>
<td style="text-align: center;">17.42</td>
<td style="text-align: center;">44.10</td>
<td style="text-align: center;">8.50</td>
</tr>
<tr>
<td style="text-align: center;">GPT-3.5 VoT</td>
<td style="text-align: center;">$\underline{\mathbf{1 9 . 0 2}}$</td>
<td style="text-align: center;">1.61</td>
<td style="text-align: center;">13.10</td>
<td style="text-align: center;">47.99</td>
<td style="text-align: center;">9.00</td>
</tr>
<tr>
<td style="text-align: center;">LLAMA3-8B CoT</td>
<td style="text-align: center;">4.65</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">28.73</td>
<td style="text-align: center;">47.24</td>
<td style="text-align: center;">16.50</td>
</tr>
<tr>
<td style="text-align: center;">LLAMA3-8B VoT</td>
<td style="text-align: center;">4.97</td>
<td style="text-align: center;">0.2</td>
<td style="text-align: center;">26.75</td>
<td style="text-align: center;">46.73</td>
<td style="text-align: center;">15.50</td>
</tr>
<tr>
<td style="text-align: center;">LLAMA3-70B CoT</td>
<td style="text-align: center;">19.90</td>
<td style="text-align: center;">2.62</td>
<td style="text-align: center;">49.01</td>
<td style="text-align: center;">56.41</td>
<td style="text-align: center;">26.00</td>
</tr>
<tr>
<td style="text-align: center;">LLAMA3-70B VoT</td>
<td style="text-align: center;">$\underline{\mathbf{3 0 . 2 4}}$</td>
<td style="text-align: center;">$\underline{\mathbf{5 . 8 5}}$</td>
<td style="text-align: center;">$\underline{\mathbf{5 4 . 0 9}}$</td>
<td style="text-align: center;">56.03</td>
<td style="text-align: center;">32.50</td>
</tr>
</tbody>
</table>
<p>Table 3: Performance of VoT in GPT-3.5 and LLAMA3 models. Underline denotes statistical significance with $\mathrm{p}&lt;0.05$ compared to corresponding CoT baseline using two-sample z-test.
geometric patterns [Cho19] and 3D spatial information [AMKK21, HZC ${ }^{+} 23$ ]. [FML ${ }^{+} 22$ ] investigated spatial reasoning capabilities of transformer-based models in the UI grounding setting. On the other hand, some works adopted in-context learning, leveraging LLMs for general purpose reasoning to convert spatial information to logic forms [YIL23], or as a general pattern machine for sequence transformation [MXF +23$]$. Recently, several works focused on evaluating spatial reasoning of LLMs as cognitive capability on navigation [YBL +23 ] and planning tasks [MHV +24 ] among various spatial structures. While most existing works rely on linguistic semantics and verbal reasoning, and might not always necessitate spatial awareness, we propose to elicit mind's eye of LLMs in spatial reasoning tasks with various formats from a cognitive perspective. The VoT prompting induces LLMs to create mental images for visualizing their internal states and inform subsequent reasoning step.</p>
<p>World Models of LLMs While there have been many theoretical debates about whether LLMs can effectively learn an internal world model from ungrounded form alone [BHT+20, MGSS21], [LeC22] advocated that world models should represent percepts and action plans at multiple levels of abstraction and multiple time scales, with the capability of planning, predicting, and reasoning. [ $\mathrm{LWG}^{+}$22] proposed to ground LLM in the physical world by reasoning over the experimental results predicted by external simulation. [HGM+23] further leveraged LLMs as world models to predict the subsequent states by action simulation, given predefined states and actions per task. On the other hand, an increasing number of studies focus on investigating internal representations of LLMs. [PP22, $\mathrm{AKH}^{+}$21] showed that by utilizing in-context learning, LLMs' learned representations can be mapped to grounded perceptual and conceptual structure in color and spatial domains. Moreover, [GT23] and [NLW23] discovered linear representations of space, time and game state in specifically trained LLMs, which are important for dynamic causal world models. Our work does not probe the internal representations of specialized LLMs, nor does it depend on external simulation engine or state definitions. We demonstrate LLMs' zero-shot capability of representing their precepts at an abstract level, predicting and tracking the internal states over time to generate action plans in multi-hop spatial reasoning tasks, which possibly mirrors the causal world model within LLMs.</p>
<h1>7 Conclusion</h1>
<p>This study introduces Visualization-of-Thought Prompting (VoT), inspired by the human cognitive function of visualizing and manipulating mental images through the mind's eye. We have demonstrated that VoT enables LLMs to exhibit the mechanism of "the mind's eye", as evidenced by their performance in multi-hop spatial reasoning tasks and our comprehensive analysis of the reasoning traces. Remarkably, VoT enable LLMs to outperform state-of-the-art multimodal large language models (MLLMs) in the tested visual tasks. While VoT demonstrates impressive efficacy in LLMs, this emergent capability to create mental images to enhance spatial reasoning resembles the mind's eye process, suggesting its promise in MLLMs.
Building on the success of experiments with GPT-4, we plan to investigate how VoT can futher elicit "the mind's eye" in MLLMs to enhance their spatial awareness. Additionally, our future efforts will focus on automatic data augmentation from real-world scenarios, aiming to identify effective methods for learning generalized internal representations of mental images. This will further improve the mind's eye of LLMs, ultimately contributing to the advancement of their cognitive and reasoning abilities.</p>
<h1>Limitations</h1>
<p>This work only scratches the surface of spatial reasoning of LLMs. Both mental images and visual state tracking rely on the emergent ability of advanced LLMs. Therefore, it might cause performance deterioration in less advanced language models or more challenging tasks. Besides, due to the limited data exposure and a lack of explicit instruction tuning, visual state tracking of current LLMs are sensitive to prompts. For example, when explicitly prompted with "use ascii-art", the tracking rate will significantly increase thereby boosting performance, while removing "reasoning" from the VoT prompt will cause a decrease of tracking rate. Moreover, the mental images tested in our work are limited to 2D grid. To strength the mind's eye of LLMs, more diverse and complicated representation should be explored in the future, such as complex geometric shapes and even 3D semantics shown in Figure 11 in appendix.</p>
<h2>References</h2>
<p>$\left[\mathrm{AKH}^{+} 21\right]$ Mostafa Abdou, Artur Kulmizev, Daniel Hershcovich, Stella Frank, Ellie Pavlick, and Anders Søgaard. Can language models encode perceptual structure without grounding? a case study in color. arXiv preprint arXiv:2109.06129, 2021.
[AMKK21] Daich Azuma, Taiki Miyanishi, Shuhei Kurita, and Motoaki Kawanabe. Scanqa: 3d question answering for spatial scene understanding. 2022 IEEE/CVF Conference on Computer Vision and Pattern Recognition (CVPR), pages 19107-19117, 2021.
[Bad92] Alan Baddeley. Working memory. Science, 255(5044):556-559, 1992.
[Bat10] John A Bateman. Language and space: a two-level semantic approach based on principles of ontological engineering. International Journal of Speech Technology, 13:29-48, 2010.
$\left[\mathrm{BCE}^{+} 23\right]$ Sébastien Bubeck, Varun Chandrasekaran, Ronen Eldan, J. Gehrke, Eric Horvitz, Ece Kamar, Peter Lee, Y. Lee, Yuan-Fang Li, Scott M. Lundberg, Harsha Nori, H. Palangi, Marco Tulio Ribeiro, and Yi Zhang. Sparks of artificial general intelligence: Early experiments with gpt-4. arXiv.org, 2023.
$\left[\mathrm{BHT}^{+} 20\right]$ Yonatan Bisk, Ari Holtzman, Jesse Thomason, Jacob Andreas, Yoshua Bengio, Joyce Chai, Mirella Lapata, Angeliki Lazaridou, Jonathan May, Aleksandr Nisnevich, et al. Experience grounds language. arXiv preprint arXiv:2004.10151, 2020.
[BK18] Nicholas Baker and Philip J Kellman. Abstract shape representation in human visual perception. Journal of Experimental Psychology: General, 147(9):1295, 2018.
$\left[\mathrm{BMR}^{+} 20\right]$ Tom B. Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, J. Kaplan, Prafulla Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell, Sandhini Agarwal, Ariel Herbert-Voss, Gretchen Krueger, T. Henighan, Rewon Child, A. Ramesh, Daniel M. Ziegler, Jeff Wu, Clemens Winter, Christopher Hesse, Mark Chen, Eric Sigler, Mateusz Litwin, S. Gray, Benjamin Chess, Jack Clark, Christopher Berner, Sam McCandlish, Alec Radford, I. Sutskever, and Dario Amodei. Language models are few-shot learners. Neural Information Processing Systems, 2020.
[CBGG97] Anthony G Cohn, Brandon Bennett, John Gooday, and Nicholas M Gotts. Representing and reasoning with qualitative spatial relations about regions. In Spatial and temporal reasoning, pages 97-134. Springer, 1997.
[Cho19] François Chollet. On the measure of intelligence, 2019.
[ES03] Niklas Eén and Niklas Sörensson. An extensible sat-solver. In International conference on theory and applications of satisfiability testing, pages 502-518. Springer, 2003.
$\left[\mathrm{FML}^{+} 22\right]$ R. Freedman, Joseph B. Mueller, Jack Ladwig, Steven Johnston, David McDonald, H. Wauck, Ruta Wheelock, and Hayley Borck. A symbolic representation of human posture for interpretable learning and reasoning. arXiv.org, 2022.</p>
<p>[GDB17] Mona M Garvert, Raymond J Dolan, and Timothy EJ Behrens. A map of abstract relational knowledge in the human hippocampal-entorhinal cortex. elife, 6:e17086, 2017.
[GN07] Eugene Goldberg and Yakov Novikov. Berkmin: A fast and robust sat-solver. Discrete Applied Mathematics, 155(12):1549-1561, 2007.
[Gol66] Solomon W Golomb. Tiling with polyominoes. Journal of Combinatorial Theory, $1(2): 280-296,1966$.
[GT23] Wes Gurnee and Max Tegmark. Language models represent space and time, 2023.
$\left[\right.$ HGM $\left.^{+} 23\right]$ Shibo Hao, Yi Gu, Haodi Ma, Joshua Jiahua Hong, Zhen Wang, Daisy Zhe Wang, and Zhiting Hu. Reasoning with language model is planning with world model, 2023.
[HK11] Joana Hois and Oliver Kutz. Towards linguistically-grounded spatial logics. In Dagstuhl Seminar Proceedings. Schloss Dagstuhl-Leibniz-Zentrum fÄ1/4r Informatik, 2011.
$\left[\right.$ HZC $\left.^{+} 23\right]$ Yining Hong, Haoyu Zhen, Peihao Chen, Shuhong Zheng, Yilun Du, Zhenfang Chen, and Chuang Gan. 3d-llm: Injecting the 3d world into large language models, 2023.
[JSM+23] Albert Q. Jiang, Alexandre Sablayrolles, Arthur Mensch, Chris Bamford, Devendra Singh Chaplot, Diego de las Casas, Florian Bressand, Gianna Lengyel, Guillaume Lample, Lucile Saulnier, Lélio Renard Lavaud, Marie-Anne Lachaux, Pierre Stock, Teven Le Scao, Thibaut Lavril, Thomas Wang, Timothée Lacroix, and William El Sayed. Mistral 7b, 2023.
[KC22] Yuna Kwak and Clayton E Curtis. Unveiling the abstract format of mnemonic representations. Neuron, 110(11):1822-1828, 2022.
[KFP19] Nikhil Krishnaswamy, Scott Friedman, and James Pustejovsky. Combining deep learning and qualitative spatial reasoning to learn complex structures from sparse examples with noise. In Proceedings of the AAAI Conference on Artificial Intelligence, volume 33, pages 2911-2918, 2019.
$\left[\right.$ KGR $\left.^{+} 23\right]$ Takeshi Kojima, Shixiang Shane Gu, Machel Reid, Yutaka Matsuo, and Yusuke Iwasawa. Large language models are zero-shot reasoners, 2023.
[KM15] Parisa Kordjamshidi and Marie-Francine Moens. Global machine learning for spatial ontology population. Journal of Web Semantics, 30:3-21, 2015.
[Knu00] Donald E Knuth. Dancing links. arXiv preprint cs/0011047, 2000.
[KPM20] Parisa Kordjamshidi, J. Pustejovsky, and Marie-Francine Moens. Representation, learning and reasoning on spatial language for downstream nlp tasks. Conference on Empirical Methods in Natural Language Processing, 2020.
[KVOM11] Parisa Kordjamshidi, Martijn Van Otterlo, and Marie-Francine Moens. Spatial role labeling: Towards extraction of spatial relations from natural language. ACM Transactions on Speech and Language Processing (TSLP), 8(3):1-36, 2011.
[LB18] Brenden M. Lake and Marco Baroni. Generalization without systematicity: On the compositional skills of sequence-to-sequence recurrent networks, 2018.
[LeC22] Yann LeCun. A path towards autonomous machine intelligence version 0.9. 2, 2022-0627. Open Review, 62(1), 2022.
[LKH $\left.{ }^{+} 22\right]$ Xiang Lorraine Li, Adhiguna Kuncoro, Jordan Hoffmann, Cyprien de Masson d'Autume, Phil Blunsom, and Aida Nematzadeh. A systematic investigation of commonsense knowledge in large language models, 2022.
[LWG $\left.{ }^{+} 22\right]$ Ruibo Liu, Jason Wei, Shixiang Shane Gu, Te-Yen Wu, Soroush Vosoughi, Claire Cui, Denny Zhou, and Andrew M. Dai. Mind's eye: Grounded language model reasoning through simulation, 2022.</p>
<p>[MFNK21] Roshanak Mirzaee, Hossein Rajaby Faghihi, Qiang Ning, and Parisa Kordjmashidi. Spartqa: A textual question answering benchmark for spatial reasoning. North American Chapter of the Association for Computational Linguistics, 2021.
[MGSS21] William Merrill, Yoav Goldberg, Roy Schwartz, and Noah A Smith. Provable limitations of acquiring meaning from ungrounded form: What will future language models understand? Transactions of the Association for Computational Linguistics, 9:1047-1060, 2021.
$\left[\mathrm{MHV}^{+} 24\right]$ Ida Momennejad, Hosein Hasanbeig, Felipe Vieira, Hiteshi Sharma, Robert Osazuwa Ness, Nebojsa Jojic, Hamid Palangi, and Jonathan Larson. Evaluating cognitive maps and planning in large language models with cogeval. Arxiv: http://arxiv.org/abs/2309.15129v1, 2024.
[MK09] Samuel T Moulton and Stephen M Kosslyn. Imagining predictions: mental imagery as mental emulation. Philosophical Transactions of the Royal Society B: Biological Sciences, 364(1521):1273-1280, 2009.
[MK22] Roshanak Mirzaee and Parisa Kordjamshidi. Transfer learning with synthetic corpora for spatial role labeling and reasoning. Conference on Empirical Methods in Natural Language Processing, 2022.
[MXF ${ }^{+}$23] Suvir Mirchandani, Fei Xia, Pete Florence, Brian Ichter, Danny Driess, Montserrat Gonzalez Arenas, Kanishka Rao, Dorsa Sadigh, and Andy Zeng. Large language models as general pattern machines, 2023.
[NLW23] Neel Nanda, Andrew Lee, and Martin Wattenberg. Emergent linear representations in world models of self-supervised sequence models. arXiv preprint arXiv:2309.00941, 2023.
$\left[\mathrm{OA}^{+}\right.$23] OpenAI, :, Josh Achiam, Steven Adler, Sandhini Agarwal, Lama Ahmad, Ilge Akkaya, Florencia Leoni Aleman, Diogo Almeida, Janko Altenschmidt, Sam Altman, Shyamal Anadkat, Red Avila, Igor Babuschkin, Suchir Balaji, Valerie Balcom, Paul Baltescu, Haiming Bao, Mo Bavarian, Jeff Belgum, Irwan Bello, Jake Berdine, Gabriel BernadettShapiro, Christopher Berner, Lenny Bogdonoff, Oleg Boiko, Madelaine Boyd, AnnaLuisa Brakman, Greg Brockman, Tim Brooks, Miles Brundage, Kevin Button, Trevor Cai, Rosie Campbell, Andrew Cann, Brittany Carey, Chelsea Carlson, Rory Carmichael, Brooke Chan, Che Chang, Fotis Chantzis, Derek Chen, Sully Chen, Ruby Chen, Jason Chen, Mark Chen, Ben Chess, Chester Cho, Casey Chu, Hyung Won Chung, Dave Cummings, Jeremiah Currier, Yunxing Dai, Cory Decareaux, Thomas Degry, Noah Deutsch, Damien Deville, Arka Dhar, David Dohan, Steve Dowling, Sheila Dunning, Adrien Ecoffet, Atty Eleti, Tyna Eloundou, David Farhi, Liam Fedus, Niko Felix, Simón Posada Fishman, Juston Forte, Isabella Fulford, Leo Gao, Elie Georges, Christian Gibson, Vik Goel, Tarun Gogineni, Gabriel Goh, Rapha Gontijo-Lopes, Jonathan Gordon, Morgan Grafstein, Scott Gray, Ryan Greene, Joshua Gross, Shixiang Shane Gu, Yufei Guo, Chris Hallacy, Jesse Han, Jeff Harris, Yuchen He, Mike Heaton, Johannes Heidecke, Chris Hesse, Alan Hickey, Wade Hickey, Peter Hoeschele, Brandon Houghton, Kenny Hsu, Shengli Hu, Xin Hu, Joost Huizinga, Shantanu Jain, Shawn Jain, Joanne Jang, Angela Jiang, Roger Jiang, Haozhun Jin, Denny Jin, Shino Jomoto, Billie Jonn, Heewoo Jun, Tomer Kaftan, Łukasz Kaiser, Ali Kamali, Ingmar Kanitscheider, Nitish Shirish Keskar, Tabarak Khan, Logan Kilpatrick, Jong Wook Kim, Christina Kim, Yongjik Kim, Hendrik Kirchner, Jamie Kiros, Matt Knight, Daniel Kokotajlo, Łukasz Kondraciuk, Andrew Kondrich, Aris Konstantinidis, Kyle Kosic, Gretchen Krueger, Vishal Kuo, Michael Lampe, Ikai Lan, Teddy Lee, Jan Leike, Jade Leung, Daniel Levy, Chak Ming Li, Rachel Lim, Molly Lin, Stephanie Lin, Mateusz Litwin, Theresa Lopez, Ryan Lowe, Patricia Lue, Anna Makanju, Kim Malfacini, Sam Manning, Todor Markov, Yaniv Markovski, Bianca Martin, Katie Mayer, Andrew Mayne, Bob McGrew, Scott Mayer McKinney, Christine McLeavey, Paul McMillan, Jake McNeil, David Medina, Aalok Mehta, Jacob Menick, Luke Metz, Andrey Mishchenko, Pamela Mishkin, Vinnie Monaco, Evan Morikawa, Daniel Mossing, Tong Mu, Mira Murati, Oleg Murk, David Mély, Ashvin Nair, Reiichiro Nakano, Rajeev Nayak, Arvind Neelakantan, Richard Ngo, Hyeonwoo Noh, Long Ouyang, Cullen O’Keefe, Jakub Pachocki, Alex Paino, Joe Palermo,</p>
<p>Ashley Pantuliano, Giambattista Parascandolo, Joel Parish, Emy Parparita, Alex Passos, Mikhail Pavlov, Andrew Peng, Adam Perelman, Filipe de Avila Belbute Peres, Michael Petrov, Henrique Ponde de Oliveira Pinto, Michael, Pokorny, Michelle Pokrass, Vitchyr Pong, Tolly Powell, Alethea Power, Boris Power, Elizabeth Proehl, Raul Puri, Alec Radford, Jack Rae, Aditya Ramesh, Cameron Raymond, Francis Real, Kendra Rimbach, Carl Ross, Bob Rotsted, Henri Roussez, Nick Ryder, Mario Saltarelli, Ted Sanders, Shibani Santurkar, Girish Sastry, Heather Schmidt, David Schnurr, John Schulman, Daniel Selsam, Kyla Sheppard, Toki Sherbakov, Jessica Shieh, Sarah Shoker, Pranav Shyam, Szymon Sidor, Eric Sigler, Maddie Simens, Jordan Sitkin, Katarina Slama, Ian Sohl, Benjamin Sokolowsky, Yang Song, Natalie Staudacher, Felipe Petroski Such, Natalie Summers, Ilya Sutskever, Jie Tang, Nikolas Tezak, Madeleine Thompson, Phil Tillet, Amin Tootoonchian, Elizabeth Tseng, Preston Tuggle, Nick Turley, Jerry Tworek, Juan Felipe Cerón Uribe, Andrea Vallone, Arun Vijayvergiya, Chelsea Voss, Carroll Wainwright, Justin Jay Wang, Alvin Wang, Ben Wang, Jonathan Ward, Jason Wei, CJ Weinmann, Akila Welihinda, Peter Welinder, Jiayi Weng, Lilian Weng, Matt Wiethoff, Dave Willner, Clemens Winter, Samuel Wolrich, Hannah Wong, Lauren Workman, Sherwin Wu, Jeff Wu, Michael Wu, Kai Xiao, Tao Xu, Sarah Yoo, Kevin Yu, Qiming Yuan, Wojciech Zaremba, Rowan Zellers, Chong Zhang, Marvin Zhang, Shengjia Zhao, Tianhao Zheng, Juntang Zhuang, William Zhuk, and Barret Zoph. Gpt-4 technical report, 2023.
[Ope23] OpenAI. Gpt-4v(ision) system card. 2023.
[PP22] Roma Patel and Ellie Pavlick. Mapping language models to grounded conceptual spaces. In International Conference on Learning Representations, 2022.
$\left[\mathrm{RAB}^{+} 20\right]$ Laura Ruis, Jacob Andreas, Marco Baroni, Diane Bouchacourt, and Brenden M Lake. A benchmark for systematic generalization in grounded language understanding. Advances in neural information processing systems, 33:19861-19872, 2020.
[Reg19] John Regehr. Explaining code using ascii art, 2019.
$\left[\mathrm{RFD}^{+} 21\right]$ Julia Rozanova, Deborah Ferreira, Krishna Dubba, Weiwei Cheng, Dell Zhang, and Andre Freitas. Grounding natural language instructions: Can large language models capture spatial information?, 2021.
$\left[\mathrm{RKH}^{+} 21\right]$ Alec Radford, Jong Wook Kim, Chris Hallacy, Aditya Ramesh, Gabriel Goh, Sandhini Agarwal, Girish Sastry, Amanda Askell, Pamela Mishkin, Jack Clark, Gretchen Krueger, and Ilya Sutskever. Learning transferable visual models from natural language supervision, 2021.
[RMK18] Taher Rahgooy, Umar Manzoor, and Parisa Kordjamshidi. Visually guided spatial relation extraction from text. In Proceedings of the 2018 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies, Volume 2 (Short Papers), pages 788-794, 2018.
[SB14] Anthony J Smith and Joanna J Bryson. A logical approach to building dungeons: Answer set programming for hierarchical procedural content generation in roguelike games. In Proceedings of the 50th Anniversary Convention of the AISB, 2014.
[SF72] Roger N Shepard and Christine Feng. A chronometric study of mental paper folding. Cognitive psychology, 3(2):228-243, 1972.
[She78] Roger N Shepard. The mental image. American psychologist, 33(2):125, 1978.
[SLYA17] Alane Suhr, Mike Lewis, James Yeh, and Yoav Artzi. A corpus of natural language for visual reasoning. In Regina Barzilay and Min-Yen Kan, editors, Proceedings of the 55th Annual Meeting of the Association for Computational Linguistics (Volume 2: Short Papers), pages 217-223, Vancouver, Canada, July 2017. Association for Computational Linguistics.
[SM71] Roger N. Shepard and Jacqueline Metzler. Mental rotation of three-dimensional objects. Science, 171:701 - 703, 1971.</p>
<p>[SMM21] Harini Sampath, Alice Merrick, and Andrew Macvean. Accessibility of command line interfaces. In Proceedings of the 2021 CHI Conference on Human Factors in Computing Systems, pages 1-10, 2021.
[SZL22] Zhengxiang Shi, Qiang Zhang, and Aldo Lipani. Stepgame: A new benchmark for robust multi-hop spatial reasoning in texts. AAAI Conference on Artificial Intelligence, 2022.
$\left[\mathrm{TLI}^{+}\right.$23] Hugo Touvron, Thibaut Lavril, Gautier Izacard, Xavier Martinet, Marie-Anne Lachaux, Timothée Lacroix, Baptiste Rozière, Naman Goyal, Eric Hambro, Faisal Azhar, Aurelien Rodriguez, Armand Joulin, Edouard Grave, and Guillaume Lample. Llama: Open and efficient foundation language models. arXiv.org, 2023.
[Tol48] Edward C Tolman. Cognitive maps in rats and men. Psychological review, 55(4):189, 1948.
$\left[\mathrm{WBC}^{+}\right.$15] Jason Weston, Antoine Bordes, Sumit Chopra, Alexander M. Rush, Bart van Merriënboer, Armand Joulin, and Tomas Mikolov. Towards ai-complete question answering: A set of prerequisite toy tasks, 2015.
$\left[\mathrm{YBL}^{+}\right.$23] Yutaro Yamada, Yihan Bao, Andrew K. Lampinen, Jungo Kasai, and Ilker Yildirim. Evaluating spatial understanding of large language models, 2023.
[YIL23] Zhun Yang, Adam Ishay, and Joohyung Lee. Coupling large language models with logic programming for robust and general reasoning from text, 2023.</p>
<h1>A Synthetic Data</h1>
<h2>A. 1 Visual Navigation</h2>
<p>As depicted in 1, given a specific $k$, the process of generating a 2D navigation map is composed of 3 steps, which are instruction generation, instruction simulation, map rendering. In instruction generation step, we enumerate all possible instruction sets navigating from the starting point to the destination (e.g move up, then move right). During this step, only the direction of each instruction is determined, while the moving distance is undetermined until next step. In instruction simulation step, simulation is applied in the 2D coordinate system with origin $(0,0)$ as the starting point. To guarantee an unique answer in each navigation map, the moving distance of each instruction is dynamically calculated to avoid overlapping. Each time when an overlapping is detected, the moving distance of previous instruction will be increased by 1 unit recursively until overlapping is resolved. As the distance is determined, those corresponding points are added to the navigating path. After all instructions are completed, the final point is marked as the destination. In the map rendering step, the bounding box of those points is adopted and normalized to a 2D square grid. The starting point and destination are marked with dedicated squares, and cells along the path are marked by empty squares, while other untouched cells are marked by obstacle squares.</p>
<div class="codehilite"><pre><span></span><code><span class="nt">Algorithm</span><span class="w"> </span><span class="nt">1</span><span class="o">:</span><span class="w"> </span><span class="nt">Navigation</span><span class="w"> </span><span class="nt">Map</span><span class="w"> </span><span class="nt">Generation</span>
<span class="nt">Input</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">\</span><span class="o">(</span><span class="nt">k</span><span class="err">\</span><span class="o">)</span>
<span class="nt">Output</span><span class="o">:</span><span class="w"> </span><span class="err">\</span><span class="o">(</span><span class="err">\</span><span class="nt">mathcal</span><span class="p">{</span><span class="err">C</span><span class="p">}</span><span class="nt">_</span><span class="p">{</span><span class="err">\text</span><span class="w"> </span><span class="err">{solution</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="o">=</span><span class="err">\</span><span class="nt">left</span><span class="err">\</span><span class="p">{</span><span class="err">s_{1</span><span class="p">}</span><span class="o">,</span><span class="w"> </span><span class="nt">s_</span><span class="p">{</span><span class="err">2</span><span class="p">}</span><span class="o">,</span><span class="w"> </span><span class="err">\</span><span class="nt">ldots</span><span class="o">,</span><span class="w"> </span><span class="nt">s_</span><span class="p">{</span><span class="err">n</span><span class="p">}</span><span class="err">\</span><span class="nt">right</span><span class="err">\}</span><span class="o">,</span><span class="w"> </span><span class="err">\</span><span class="nt">mathcal</span><span class="p">{</span><span class="err">C</span><span class="p">}</span><span class="nt">_</span><span class="p">{</span><span class="err">\text</span><span class="w"> </span><span class="err">{textual_map</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="o">=</span><span class="err">\</span><span class="nt">left</span><span class="err">\</span><span class="p">{</span><span class="err">t_{1</span><span class="p">}</span><span class="o">,</span><span class="w"> </span><span class="nt">t_</span><span class="p">{</span><span class="err">2</span><span class="p">}</span><span class="o">,</span><span class="w"> </span><span class="err">\</span><span class="nt">ldots</span><span class="o">,</span><span class="w"> </span><span class="nt">t_</span><span class="p">{</span><span class="err">n</span><span class="p">}</span><span class="err">\</span><span class="nt">right</span><span class="err">\}\</span><span class="o">)</span>
<span class="w">    </span><span class="err">\</span><span class="o">(</span><span class="err">\</span><span class="nt">mathcal</span><span class="p">{</span><span class="err">C</span><span class="p">}</span><span class="nt">_</span><span class="p">{</span><span class="err">\text</span><span class="w"> </span><span class="err">{visual_map</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="o">=</span><span class="err">\</span><span class="nt">left</span><span class="err">\</span><span class="p">{</span><span class="err">v_{1</span><span class="p">}</span><span class="o">,</span><span class="w"> </span><span class="nt">v_</span><span class="p">{</span><span class="err">2</span><span class="p">}</span><span class="o">,</span><span class="w"> </span><span class="err">\</span><span class="nt">ldots</span><span class="o">,</span><span class="w"> </span><span class="nt">v_</span><span class="p">{</span><span class="err">n</span><span class="p">}</span><span class="err">\</span><span class="nt">right</span><span class="err">\}</span><span class="w"> </span><span class="o">;</span><span class="err">\</span><span class="o">)</span><span class="w"> </span><span class="nt">where</span><span class="w"> </span><span class="err">\</span><span class="o">(</span><span class="nt">n</span><span class="o">=</span><span class="nt">2</span><span class="o">^</span><span class="p">{</span><span class="err">k+1</span><span class="p">}</span><span class="err">\</span><span class="o">)</span>
<span class="w">    </span><span class="err">\</span><span class="o">(</span><span class="err">\</span><span class="nt">operatorname</span><span class="p">{</span><span class="err">dirs</span><span class="p">}</span><span class="w"> </span><span class="err">\</span><span class="nt">leftarrow</span><span class="err">\</span><span class="o">)</span><span class="w"> </span><span class="cp">[</span><span class="nx">up</span><span class="p">,</span><span class="w"> </span><span class="nx">left</span><span class="p">,</span><span class="w"> </span><span class="nx">down</span><span class="p">,</span><span class="w"> </span><span class="nx">right</span><span class="cp">]</span>
<span class="w">    </span><span class="nt">instruction_sets</span><span class="w"> </span><span class="err">\</span><span class="o">(</span><span class="err">\</span><span class="nt">leftarrow</span><span class="err">\</span><span class="o">)</span><span class="w"> </span><span class="nt">gen_instruction</span><span class="w"> </span><span class="err">\</span><span class="o">((</span><span class="err">\</span><span class="o">)</span><span class="w"> </span><span class="nt">dirs</span><span class="o">,</span><span class="w"> </span><span class="err">\</span><span class="o">(</span><span class="nt">k</span><span class="o">)</span><span class="err">\</span><span class="o">)</span>
<span class="w">    </span><span class="nt">for</span><span class="w"> </span><span class="nt">dir_instructs</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nt">instruction_sets</span><span class="w"> </span><span class="nt">do</span>
<span class="w">        </span><span class="nt">cur_pos</span><span class="o">,</span><span class="w"> </span><span class="nt">path_points</span><span class="o">,</span><span class="w"> </span><span class="nt">moves</span><span class="w"> </span><span class="err">\</span><span class="o">(</span><span class="err">\</span><span class="nt">leftarrow</span><span class="err">\</span><span class="o">)</span><span class="w"> </span><span class="nt">initialize</span><span class="o">()</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nt">origin</span><span class="w"> </span><span class="nt">as</span><span class="w"> </span><span class="nt">the</span><span class="w"> </span><span class="nt">starting</span><span class="w"> </span><span class="nt">point</span>
<span class="w">        </span><span class="nt">for</span><span class="w"> </span><span class="nt">direction</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nt">dir_instructs</span><span class="w"> </span><span class="nt">do</span>
<span class="w">            </span><span class="o">//</span><span class="w"> </span><span class="nt">instruction</span><span class="w"> </span><span class="nt">simulation</span>
<span class="w">            </span><span class="nt">if</span><span class="w"> </span><span class="nt">not</span><span class="w"> </span><span class="nt">validate_plan</span><span class="o">(</span><span class="nt">cur_pos</span><span class="o">,</span><span class="w"> </span><span class="nt">direction</span><span class="o">,</span><span class="w"> </span><span class="nt">path_points</span><span class="o">)</span><span class="w"> </span><span class="nt">then</span>
<span class="w">                </span><span class="nt">increase_previous_move</span><span class="o">(</span><span class="nt">cur_pos</span><span class="o">,</span><span class="w"> </span><span class="nt">moves</span><span class="o">,</span><span class="w"> </span><span class="nt">path_points</span><span class="o">)</span>
<span class="w">            </span><span class="nt">end</span>
<span class="w">            </span><span class="nt">cur_pos</span><span class="o">,</span><span class="w"> </span><span class="nt">path_points</span><span class="w"> </span><span class="err">\</span><span class="o">(</span><span class="err">\</span><span class="nt">leftarrow</span><span class="err">\</span><span class="o">)</span><span class="w"> </span><span class="nt">step_forward</span><span class="o">(</span><span class="nt">cur_pos</span><span class="o">,</span><span class="w"> </span><span class="nt">direction</span><span class="o">,</span><span class="w"> </span><span class="nt">path_points</span><span class="o">)</span>
<span class="w">            </span><span class="nt">moves</span><span class="w"> </span><span class="err">\</span><span class="o">(</span><span class="err">\</span><span class="nt">leftarrow</span><span class="err">\</span><span class="o">)</span><span class="w"> </span><span class="nt">moves</span><span class="w"> </span><span class="err">\</span><span class="o">(</span><span class="err">\</span><span class="nt">cup</span><span class="err">\</span><span class="o">)</span><span class="w"> </span><span class="nt">direction</span>
<span class="w">        </span><span class="nt">end</span>
<span class="w">        </span><span class="err">\</span><span class="o">(</span><span class="nt">s_</span><span class="p">{</span><span class="err">i</span><span class="p">}</span><span class="w"> </span><span class="err">\</span><span class="nt">leftarrow</span><span class="err">\</span><span class="o">)</span><span class="w"> </span><span class="nt">moves</span>
<span class="w">        </span><span class="err">\</span><span class="o">(</span><span class="nt">t_</span><span class="p">{</span><span class="err">i</span><span class="p">}</span><span class="o">,</span><span class="w"> </span><span class="nt">v_</span><span class="p">{</span><span class="err">i</span><span class="p">}</span><span class="w"> </span><span class="err">\</span><span class="nt">leftarrow</span><span class="err">\</span><span class="o">)</span><span class="w"> </span><span class="nt">render_map</span><span class="o">(</span><span class="nt">extract_bounding_box</span><span class="o">(</span><span class="nt">path_points</span><span class="o">))</span>
<span class="w">        </span><span class="err">\</span><span class="o">(</span><span class="err">\</span><span class="nt">mathcal</span><span class="p">{</span><span class="err">C</span><span class="p">}</span><span class="nt">_</span><span class="p">{</span><span class="err">\text</span><span class="w"> </span><span class="err">{solution</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="w"> </span><span class="err">\</span><span class="nt">leftarrow</span><span class="w"> </span><span class="nt">C_</span><span class="p">{</span><span class="err">\text</span><span class="w"> </span><span class="err">{solution</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="w"> </span><span class="err">\</span><span class="nt">cup</span><span class="w"> </span><span class="nt">s_</span><span class="p">{</span><span class="err">i</span><span class="p">}</span><span class="err">\</span><span class="o">)</span>
<span class="w">        </span><span class="err">\</span><span class="o">(</span><span class="err">\</span><span class="nt">mathcal</span><span class="p">{</span><span class="err">C</span><span class="p">}</span><span class="nt">_</span><span class="p">{</span><span class="err">\text</span><span class="w"> </span><span class="err">{textual_map</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="w"> </span><span class="err">\</span><span class="nt">leftarrow</span><span class="w"> </span><span class="nt">C_</span><span class="p">{</span><span class="err">\text</span><span class="w"> </span><span class="err">{textual_map</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="w"> </span><span class="err">\</span><span class="nt">cup</span><span class="w"> </span><span class="nt">t_</span><span class="p">{</span><span class="err">i</span><span class="p">}</span><span class="err">\</span><span class="o">)</span>
<span class="w">        </span><span class="err">\</span><span class="o">(</span><span class="err">\</span><span class="nt">mathcal</span><span class="p">{</span><span class="err">C</span><span class="p">}</span><span class="nt">_</span><span class="p">{</span><span class="err">\text</span><span class="w"> </span><span class="err">{visual_map</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="w"> </span><span class="err">\</span><span class="nt">leftarrow</span><span class="w"> </span><span class="nt">C_</span><span class="p">{</span><span class="err">\text</span><span class="w"> </span><span class="err">{visual_map</span><span class="w"> </span><span class="p">}</span><span class="err">}</span><span class="w"> </span><span class="err">\</span><span class="nt">cup</span><span class="w"> </span><span class="nt">v_</span><span class="p">{</span><span class="err">i</span><span class="p">}</span><span class="err">\</span><span class="o">)</span>
<span class="w">    </span><span class="nt">end</span>
</code></pre></div>

<p>Since the direction of each navigation instruction is alternating, there are $4 * 2^{k-1}=2^{k+1}$ kinds of spatial configurations for a $k$-hop navigation map. During the implementation, we simplify the recursive implementation with an early quit when path overlapping could not be resolved within one iteration, the main consideration of which is the size of the map. So the number of generated map is slightly lower than $2^{k+1}$ as the navigating step $k$ increases.</p>
<h2>A. 2 Visual Tiling</h2>
<p>The data generation process comprises 3 stages, including configuration generation, question generation and polyomino rendering. In the configuration generation stage, to generate valid spatial configurations of a rectangle and the corresponding polyomino set, we convert a tiling problem to existing formalized problems. One of the problems is an exact cover problem leveraging dancing link algorithm [Knu00], which could be described as: given a matrix of 0 s and 1 s , find a set of rows containing exactly one 1 in each column. The conversion is to construct a matrix of 0 s and 1 s , each row of which represents a possible arrangement of placing a specific polyomino in a rectangle. As illustrated in Equation 9, given $k$ polyomino pieces, and a rectangle of $n$ units to be filled, the first $k$</p>
<p>columns compose an one-hot vector indicating the corresponding polyomino, and the last $n$ columns are marked with 0 or 1 depending on whether the corresponding unit is filled by that polyomino. Then finding a set of polyomino arrangements in a rectangle equals to find a set of rows containing exactly one 1 in each column. Another adaptable problem is the boolean satisfiability problem (commonly known as SAT), for which efficient solvers exist [ES03, GN07]. A tiling problem can be converted to SAT by introducing a boolean variable for each possible arrangement of each piece, and then adding clauses comprising of those boolean variables that ensure at least one arrangement of each piece is achieved, while avoiding conflicts between arrangements of one piece or two different pieces.</p>
<p>Given the size of a rectangle and polyominoes to be fit, multiple corresponding solutions are generated by applying those algorithms. Then in the question generation stage, we randomly mask several polyomino pieces in the rectangle, and generate a question answer(QA) pair for each masked polyomino. Finally the rectangle and each polyomino piece are rendered with emoji squares.
<img alt="img-5.jpeg" src="img-5.jpeg" /></p>
<h1>A. 3 Visual Data Rendering</h1>
<p>After gathering the textual dataset of 2D square grid, we generate the corresponding visual dataset by drawing text onto an image. Specifically we adopt color emojis for a fair comparison as they're more visual friendly to a multimodal model.</p>
<h2>A. 4 Dataset Details</h2>
<p>Data distribution among various difficulty levels for visual navigation tasks and visual tiling tasks are provided in Table 4 and 5. It provides flexible difficulty control across different tasks. For visual tiling task, the difficulty is controlled by the number of masked polyomino pieces. As the number increases, the more spatial arrangements LLMs need to consider. Regarding the visual navigation task, as illustrated in figure2, we use the number of roads $k$ to control difficulty, which is corresponding to the size of the map.</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Task</th>
<th style="text-align: center;">$K$ Step</th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
<th style="text-align: center;">Total</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">7</td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">Route Planning</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">16</td>
<td style="text-align: center;">32</td>
<td style="text-align: center;">64</td>
<td style="text-align: center;">128</td>
<td style="text-align: center;">248</td>
<td style="text-align: center;">496</td>
</tr>
<tr>
<td style="text-align: center;">Next Step Prediction</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">32</td>
<td style="text-align: center;">96</td>
<td style="text-align: center;">256</td>
<td style="text-align: center;">640</td>
<td style="text-align: center;">1488</td>
<td style="text-align: center;">2520</td>
</tr>
</tbody>
</table>
<p>Table 4: Data distribution of visual navigation dataset with the total navigating step of $k$ indicating difficulty level. The reason why the number of generated map is slightly lower than $2^{k+1}$ for $k&gt;5$ is explained in Appendix A.1.</p>
<table>
<thead>
<tr>
<th style="text-align: center;"></th>
<th style="text-align: center;">Mask count</th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
<th style="text-align: center;">Total</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">Configuration</td>
<td style="text-align: center;">248</td>
<td style="text-align: center;">124</td>
<td style="text-align: center;">376</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr>
<td style="text-align: center;">QA Instance</td>
<td style="text-align: center;">489</td>
<td style="text-align: center;">307</td>
<td style="text-align: center;">796</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
<p>Table 5: Details of visual tiling dataset. Some QA instances are discarded when multiple solutions exist and all answers are correct.</p>
<h2>B Examples</h2>
<p>For visual navigation and visual tiling tasks, the structured input template is comprised of task instruction, input parameters and prompt of specific setting.</p>
<h2>B. 1 Visual Tasks</h2>
<p>Task instructions and responses of each visual task under setting GPT-4 VoT are provided as following:</p>
<ul>
<li>
<p>Route Planning Task instruction in Figure 6, response in Figure 12 .</p>
</li>
<li>
<p>Next Step Prediction Task instruction in Figure 6, response in Figure 13.</p>
</li>
<li>Visual Tiling Task instruction in Figure 7, response in Figure 14.
<img alt="img-6.jpeg" src="img-6.jpeg" /></li>
</ul>
<p>Figure 6: Task Instruction of visual navigation.
<img alt="img-7.jpeg" src="img-7.jpeg" /></p>
<p>Figure 7: Task Instruction of visual tiling.</p>
<h1>B. 2 Natural Language Navigation</h1>
<p>Prompt Example You have been given a 3 by 3 square grid. Starting from a vertex, you will move along the edges of the grid. Initially, you are positioned at the bottom-left corner of the grid, where you will find a torch, then you go right, where you will find an infant bed, then you go right, where you will find an American dipper. Then you go up, where you will find a jay, then you go left, where you will find a terrapin, then you go left, where you will find a microwave oven. Then you go up,</p>
<h2>Visualize the state after each reasoning step</h2>
<p>First, let's look at the target rectangle and identify the empty squares ( $\bigcirc$ ) where we need to fit the polyominois:
<img alt="img-8.jpeg" src="img-8.jpeg" /></p>
<p>We have two polyominoes to fit into this rectangle: Tetromino I ( $\square$ ) and Tetromino T ( $\square$ ). The Tetromino I can only fit in the bottom row since it's the only place with four consecutive empty squares, either horizontally or vertically. Let's place the Tetromino I ( $\square$ ) in the bottom row:
<img alt="img-9.jpeg" src="img-9.jpeg" /></p>
<p>We can see that Variation 2 of Tetromino T ( $\square$ ) fits perfectly into the remaining empty squares, as it matches the T shape formed by the empty squares. Let's place Variation 2 of Tetromino T ( $\square$ ) into the target rectangle:
<img alt="img-10.jpeg" src="img-10.jpeg" /></p>
<p>The correct variation of Tetromino T to fit into the empty squares is Variation 2.
Answer: A. 2
(a) Common behaviors of VoT and CoT prompting in visual tiling task, with the overall track rate of $87.1 \%$ and $57.4 \%$ respectively.</p>
<h2>Visualize the state after each reasoning step</h2>
<p>To navigate from $\square$ to $\square$, we need to find the path that avoids obstacles ( $\boldsymbol{\aleph}$ ) and follows the roads ( $\bigcirc$ ). Here's the step-by-step navigation:</p>
<ol>
<li>Move down from $\square$ to the end of the continuous road.
<img alt="img-11.jpeg" src="img-11.jpeg" /></li>
</ol>
<p>After the move:
<img alt="img-12.jpeg" src="img-12.jpeg" /></p>
<p>After the move:
<img alt="img-13.jpeg" src="img-13.jpeg" /></p>
<p>The has now reached the $\square$ completing the navigation task.</p>
<h2>Visualize the state after each reasoning step</h2>
<p>To navigate from $\square$ to $\square$ on the provided map, follow these instructions:</p>
<ol>
<li>Move down to the end of the continuous road.</li>
<li>Move right to the end of the continuous road.</li>
<li>Move up to reach the destination $\square$.</li>
</ol>
<p>Here's the visualization after each step.
Starting point:
<img alt="img-14.jpeg" src="img-14.jpeg" /></p>
<p>After Step 1 (Move down):
<img alt="img-15.jpeg" src="img-15.jpeg" /></p>
<p>After Step 2 (Move right):</p>
<p>After Step 3 (Move up):</p>
<p>(b) Route planning task is sensitive to prompts. After deleting the word "reasoning" from the VoT prompt, final answer and state is derived without conditioning on state visualization in many cases. The left example provides a correct solution with imperfect intermediate visualization, while the right example provides a wrong solution.</p>
<p>Figure 8: Example cases of visual state tracking behaviors in different tasks. We provide side-by-side comparisons to show how visual state tracking is influenced by prompt, where bold texts on the top are prompts to compare. Case on the left exhibits visual state tracking in an interleaved manner, where next state is conditioned on visualization of previous states. Case on the right disentangles verbal reasoning and state visualization, which leads to a drop in tracking rate and task performance.</p>
<p>where you will find a baseball player, then you go right, where you will find a harvestman, then you go right, where you will find a neck brace. Now you have all the information on the map. You start at the position where the torch is located, then you go right by one step, then you go right by one step, then you go up by one step, then you go up by one step, then you go left by one step, then you go down by one step, and then you go down by one step. What will you find?</p>
<p>Response Example See Figure 15.</p>
<h1>C Visual State Tracking</h1>
<p>As for where this emergent ability stems from, it might derive from tabular data, city grid navigation, maze exploration related coding problems [YBL ${ }^{+}$23]. These tasks involves understanding and manipulating objects in a 2D square grid. Besides, we conjecture the exposure of ascii-art comments [Reg19] during LLMs' code pre-training possibly enhances this generalized ability. As a fact to support this conjecture, the visual tiling task is different from navigation tasks because it requires shape understanding and spatial manipulation ability. While tabular data and square grid navigation data boost row-wise or column-wise attention, ascii-art supplements intricate spatial attention to understand and manipulate 2D shapes. Additionally, ascii-art in code comments is presented in various formats, one of which is interleaved ascii diagrams, natural language and programming language. It require LLMs to generate the interleaved mental images and text sequence, thereby enhancing spatial visualization ability and spatiotemporal causality. Interestingly in the natural language navigation task, when GPT-4 is prompted with "use ascii-art to visualize", the complete tracking rate increases to $98.5 \%$ (+78.5\%), boosting task performance to $62.5 \%$ (+3.5\%).</p>
<h2>C. 1 Ascii-art in Code Comments</h2>
<p>Ascii-art is commonly used in code comments to represent data structure, diagram, geometry and so on, which could benefit LLMs' spatial understanding and visualization capability. Besides, it's also used to illustrate how an algorithm works or simulate an operation, where reasoning traces and corresponding visualization are presented in an interleaved manner. Below are several examples in open-source projects.</p>
<ul>
<li>Spatial Causality:Double-ended queue in Rust, Scrolling web pages and tree rotation present triplets of previous visual state, instruction, and updated state of instruction following.</li>
<li>Temporal Causality: Undo systems from emacs provides various temporal states of the undo system when undo operation happens in different timelines and corresponding visualizations in an interleaved manner. Each visualization reflects the temporal casuality of the system state.</li>
</ul>
<p>This kind of interleaved sequence tracks the system state over time, thus reflecting spatiotemporal casuality.</p>
<h2>D Performance Trends Across Levels</h2>
<p>In this analysis, we examine performance trends across varying difficulty levels in the next-step prediction task for models utilizing either CoT or VoT methods. These trends are crucial for understanding the inherent unpredictability associated with random guessing. As $k$ increases from 2 to 7 in a $k$-step navigation map, distinct performance patterns emerge among different models, as depicted in Figure 9. Larger language models such as GPT-4 and LLAMA3-70B demonstrate a more predictable decrease in accuracy with increasing $k$. This trend indicates a robust ability to handle progressively challenging tasks, despite the overall decrease in performance. Detailed statistics are provided in table 6. In contrast, less powerful models like GPT-3.5 and LLAMA3-8B exhibit an irregular performance trajectory. These models show variable accuracy, with significant fluctuations at higher difficulty levels, suggesting a reliance on random guessing, particularly under conditions of increased task difficulty. This behavior highlights their limitations in sustaining reliable reasoning processes through more complex scenarios. Furthermore, the VoT method seems to offer a modest improvement in performance for the less powerful models, particularly in scenarios of lower difficulty.</p>
<p>This observation suggests that VoT might be advantageous for enhancing reliable reasoning in simpler spatial reasoning tasks, potentially compensating for the inherent weaknesses of smaller language models.
<img alt="img-16.jpeg" src="img-16.jpeg" /></p>
<p>Figure 9: Performance Trends of CoT and VoT Models Across difficulty levels in next-step-prediction task.</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Model</th>
<th style="text-align: center;">K-step Map</th>
<th style="text-align: center;">Map Count</th>
<th style="text-align: center;">CoT Accuracy (\%)</th>
<th style="text-align: center;">VoT Accuracy (\%)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">GPT-4</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">75.00</td>
<td style="text-align: center;">75.00</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">32</td>
<td style="text-align: center;">68.75</td>
<td style="text-align: center;">62.50</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">96</td>
<td style="text-align: center;">60.42</td>
<td style="text-align: center;">68.75</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">256</td>
<td style="text-align: center;">50.78</td>
<td style="text-align: center;">64.06</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">640</td>
<td style="text-align: center;">52.34</td>
<td style="text-align: center;">55.16</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">1488</td>
<td style="text-align: center;">45.30</td>
<td style="text-align: center;">52.69</td>
</tr>
<tr>
<td style="text-align: center;">LLama3-70B</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">62.50</td>
<td style="text-align: center;">62.50</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">32</td>
<td style="text-align: center;">68.75</td>
<td style="text-align: center;">65.63</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">96</td>
<td style="text-align: center;">60.42</td>
<td style="text-align: center;">62.50</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">256</td>
<td style="text-align: center;">56.25</td>
<td style="text-align: center;">57.42</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">640</td>
<td style="text-align: center;">48.59</td>
<td style="text-align: center;">54.84</td>
</tr>
<tr>
<td style="text-align: center;"></td>
<td style="text-align: center;">7</td>
<td style="text-align: center;">1488</td>
<td style="text-align: center;">46.71</td>
<td style="text-align: center;">52.35</td>
</tr>
</tbody>
</table>
<p>Table 6: CoT and VoT performance of advanced models in next-step-prediction task across various difficulty levels. While performance drops as difficulty level increases, VoT method generally maintains a higher accuracy compared to CoT, highlighting its robustness in more challenging scenarios.</p>
<h1>E Case study</h1>
<p>We consider visual state tracking similar to spatiotemporal simulation. During the simulation in those tasks, we discovered several interesting behaviors of LLM.</p>
<ol>
<li>Diverse visualization formats for state tracking: Nearly 30 different symbols found in the navigation tasks to track the navigation progress, including marking the path, marking the current location. Among those diverse representations, LLM succeeded in some challenging cases where it used directional arrow emojis to indicate both the location and moving direction at each step. More examples could be found in Appendix E.1.</li>
<li>
<p>Inconsistency between language and visualization: This is commonly observed across all tasks. Due to the limited visualization capability, sometimes LLM generates accurate language instruction but inaccurate visualization. And in other cases, LLM generates wrong answers even the visualization is generated correctly, which reflects its limitation of spatial understanding as discussed in previous section. More examples could be found in Appendix E.2.</p>
</li>
<li>
<p>Self-refine mechanism: We found several cases in visual tiling tasks where spatial hallucination happens due to the inconsistency or inaccurate visualization. Subsequently, LLM refined its reasoning, resulting in an accurate visualization and the correction of the final answer. More examples could be found in Appendix E.3.</p>
</li>
</ol>
<h1>E. 1 mental images for State Tracking</h1>
<p>In the visual navigation task, LLM adopted various symbols and representations to track the state of navigation progress. As shown in Figure 10, there're several tracking styles.</p>
<ul>
<li>Mark the path: adopting an identical symbol to mark current location or part of the path.</li>
<li>Mark path and direction: using directional arrows to mark current location and indicate the moving direction simultaneously, which is more challenging than simply marking the path.</li>
<li>Mark path with temporal steps: using numbers to demonstrate both temporal steps and current location.</li>
<li>Remove road: turning roads into obstacles to avoid turning back, instead of adopting additional symbols to mark the path.</li>
</ul>
<h2>E. 2 Inconsistency between Language and Visualization</h2>
<p>In the visual tiling task, two inconsistent steps are highlighted in Figure 16. One is the inconsistent visualization with the language instruction of "place Variation 6 of Tetromino L". Another is the wrong decision to chose "Variation 2 of Tetromino I" given the visualization of the valid state.</p>
<h2>E. 3 Self-refine Mechanism</h2>
<p>We found visualization could enhance LLM's reasoning by self-grounding and refining subsequent reasoning steps in some cases. As shown in Figure 17, despite successfully identifying variation 1 of tetromino L as incorrect option, GPT-4 excluded the correct option of variation 6 even it's placed accurately due to spatial hallucination (overlapping with yellow pieces), which led to a impossible solution. Then it detected the mistake and re-evaluate the placement of variation 6. Finally it placed the correct piece into the top left corner and validated the answer by filling the remaining space.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:0">
<p>${ }^{1}$ We use this term for simplicity. In natural language navigation tasks, LLMs often output additional words in the extracted answer besides the expected object name. For example, "Answer: You will find ...". In this case, sub-string matching is adopted without affecting the correctness. Otherwise, exact matching is adopted for multiple choice questions in visual tasks.&#160;<a class="footnote-backref" href="#fnref:0" title="Jump back to footnote 1 in the text">&#8617;</a><a class="footnote-backref" href="#fnref2:0" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>            </div>
        </div>

    </div>
</body>
</html>